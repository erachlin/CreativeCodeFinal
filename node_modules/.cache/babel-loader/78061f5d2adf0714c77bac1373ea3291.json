{"ast":null,"code":"import { p as pick, _ as _objectSpread2, o as omit, s as styled, u as useInputContext, R as Row, L as Label, V as ValueInput, P as Portal, O as Overlay, c as createInternalPlugin, a as Vector, g as getVectorPlugin, b as useTransform, d as useTh, e as useDrag, f as _extends, m as multiplyStep, h as clamp, i as _objectWithoutProperties, n as normalizeKeyedNumberSettings, j as invertedRange, k as sanitizeStep, r as range, l as RangeWrapper, q as Range, I as Indicator, S as Scrubber, t as getUid, v as SpecialInputs, w as warn, x as LevaErrors, y as updateInput, z as normalizeInput, A as useInputSetters, B as Plugins, C as InputContext, D as StyledInputWrapper, E as useStoreContext, F as useCanvas2d, G as useInput, H as log, J as StyledTitle, K as Chevron, M as StyledWrapper, N as StyledContent, Q as StyledFolder, T as StyledInputRow, U as debounce, W as globalStyles, X as PanelSettingsContext, Y as StoreContext, Z as mergeTheme, $ as ThemeContext, a0 as render, a1 as register, a2 as LevaInputs, a3 as select, a4 as number$1, a5 as string, a6 as boolean } from './vector-plugin-6f82aee9.esm.js';\nexport { a2 as LevaInputs, a7 as LevaStoreProvider, E as useStoreContext } from './vector-plugin-6f82aee9.esm.js';\nimport v8n from 'v8n';\nimport { extend, colord, getFormat } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\nimport { dequal } from 'dequal/lite';\nimport 'react-dom';\nimport React, { useRef, useMemo, useLayoutEffect, useEffect, useState, useCallback, forwardRef, useImperativeHandle } from 'react';\nimport { RgbaColorPicker, RgbColorPicker } from 'react-colorful';\nimport shallow from 'zustand/shallow';\nimport '@use-gesture/react';\nimport '@radix-ui/react-portal';\nimport '@radix-ui/react-tooltip';\nimport { useDropzone } from 'react-dropzone';\nimport create from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\nimport merge from 'merge-value';\nimport '@stitches/react';\n\nconst join = function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return args.filter(Boolean).join('.');\n};\n\nfunction getKeyPath(path) {\n  const dir = path.split('.');\n  return [dir.pop(), dir.join('.') || undefined];\n}\n\nfunction getValuesForPaths(data, paths) {\n  return Object.entries(pick(data, paths)).reduce((acc, _ref2) => {\n    let [, {\n      value,\n      disabled,\n      key\n    }] = _ref2;\n    acc[key] = disabled ? undefined : value;\n    return acc;\n  }, {});\n}\n\nfunction useCompareMemoize(value, deep) {\n  const ref = useRef();\n  const compare = deep ? dequal : shallow;\n\n  if (!compare(value, ref.current)) {\n    ref.current = value;\n  }\n\n  return ref.current;\n}\n\nfunction useDeepMemo(fn, deps) {\n  return useMemo(fn, useCompareMemoize(deps, true));\n}\n\nfunction useToggle(toggled) {\n  const wrapperRef = useRef(null);\n  const contentRef = useRef(null);\n  const firstRender = useRef(true);\n  useLayoutEffect(() => {\n    if (!toggled) {\n      wrapperRef.current.style.height = '0px';\n      wrapperRef.current.style.overflow = 'hidden';\n    }\n  }, []);\n  useEffect(() => {\n    if (firstRender.current) {\n      firstRender.current = false;\n      return;\n    }\n\n    let timeout;\n    const ref = wrapperRef.current;\n\n    const fixHeight = () => {\n      if (toggled) {\n        ref.style.removeProperty('height');\n        ref.style.removeProperty('overflow');\n        contentRef.current.scrollIntoView({\n          behavior: 'smooth',\n          block: 'nearest'\n        });\n      }\n    };\n\n    ref.addEventListener('transitionend', fixHeight, {\n      once: true\n    });\n    const {\n      height\n    } = contentRef.current.getBoundingClientRect();\n    ref.style.height = height + 'px';\n\n    if (!toggled) {\n      ref.style.overflow = 'hidden';\n      timeout = window.setTimeout(() => ref.style.height = '0px', 50);\n    }\n\n    return () => {\n      ref.removeEventListener('transitionend', fixHeight);\n      clearTimeout(timeout);\n    };\n  }, [toggled]);\n  return {\n    wrapperRef,\n    contentRef\n  };\n}\n\nconst useVisiblePaths = store => {\n  const [paths, setPaths] = useState(store.getVisiblePaths());\n  useEffect(() => {\n    setPaths(store.getVisiblePaths());\n    const unsub = store.useStore.subscribe(store.getVisiblePaths, setPaths, {\n      equalityFn: shallow\n    });\n    return () => unsub();\n  }, [store]);\n  return paths;\n};\n\nfunction useValuesForPath(store, paths, initialData) {\n  const valuesForPath = store.useStore(s => {\n    const data = _objectSpread2(_objectSpread2({}, initialData), s.data);\n\n    return getValuesForPaths(data, paths);\n  }, shallow);\n  return valuesForPath;\n}\n\nfunction usePopin() {\n  let margin = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 3;\n  const popinRef = useRef(null);\n  const wrapperRef = useRef(null);\n  const [shown, setShow] = useState(false);\n  const show = useCallback(() => setShow(true), []);\n  const hide = useCallback(() => setShow(false), []);\n  useLayoutEffect(() => {\n    if (shown) {\n      const {\n        bottom,\n        top,\n        left\n      } = popinRef.current.getBoundingClientRect();\n      const {\n        height\n      } = wrapperRef.current.getBoundingClientRect();\n      const direction = bottom + height > window.innerHeight - 40 ? 'up' : 'down';\n      wrapperRef.current.style.position = 'fixed';\n      wrapperRef.current.style.zIndex = '10000';\n      wrapperRef.current.style.left = left + 'px';\n      if (direction === 'down') wrapperRef.current.style.top = bottom + margin + 'px';else wrapperRef.current.style.bottom = window.innerHeight - top + margin + 'px';\n    }\n  }, [margin, shown]);\n  return {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  };\n}\n\nextend([namesPlugin]);\nconst convertMap = {\n  rgb: 'toRgb',\n  hsl: 'toHsl',\n  hsv: 'toHsv',\n  hex: 'toHex'\n};\nv8n.extend({\n  color: () => value => colord(value).isValid()\n});\n\nconst schema$2 = o => v8n().color().test(o);\n\nfunction convert(color, _ref3) {\n  let {\n    format,\n    hasAlpha,\n    isString\n  } = _ref3;\n  const convertFn = convertMap[format] + (isString && format !== 'hex' ? 'String' : '');\n  const result = color[convertFn]();\n  return typeof result === 'object' && !hasAlpha ? omit(result, ['a']) : result;\n}\n\nconst sanitize$2 = (v, settings) => {\n  const color = colord(v);\n  if (!color.isValid()) throw Error('Invalid color');\n  return convert(color, settings);\n};\n\nconst format$1 = (v, settings) => {\n  return convert(colord(v), _objectSpread2(_objectSpread2({}, settings), {}, {\n    isString: true,\n    format: 'hex'\n  }));\n};\n\nconst normalize$3 = _ref4 => {\n  let {\n    value\n  } = _ref4;\n\n  const _f = getFormat(value);\n\n  const format = _f === 'name' ? 'hex' : _f;\n  const hasAlpha = typeof value === 'object' ? 'a' in value : _f === 'hex' && value.length === 8 || /^(rgba)|(hsla)|(hsva)/.test(value);\n  const settings = {\n    format,\n    hasAlpha,\n    isString: typeof value === 'string'\n  };\n  return {\n    value: sanitize$2(value, settings),\n    settings\n  };\n};\n\nvar props$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schema: schema$2,\n  sanitize: sanitize$2,\n  format: format$1,\n  normalize: normalize$3\n});\nconst ColorPreview = styled('div', {\n  position: 'relative',\n  boxSizing: 'border-box',\n  borderRadius: '$sm',\n  overflow: 'hidden',\n  cursor: 'pointer',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  backgroundColor: '#fff',\n  backgroundImage: `url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill-opacity=\".05\"><path d=\"M8 0h8v8H8zM0 8h8v8H0z\"/></svg>')`,\n  $inputStyle: '',\n  $hover: '',\n  zIndex: 1,\n  variants: {\n    active: {\n      true: {\n        $inputStyle: '$accent1'\n      }\n    }\n  },\n  '&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    right: 0,\n    left: 0,\n    backgroundColor: 'currentColor',\n    zIndex: 1\n  }\n});\nconst PickerContainer = styled('div', {\n  position: 'relative',\n  display: 'grid',\n  gridTemplateColumns: '$sizes$rowHeight auto',\n  columnGap: '$colGap',\n  alignItems: 'center'\n});\nconst PickerWrapper = styled('div', {\n  width: '$colorPickerWidth',\n  height: '$colorPickerHeight',\n  '.react-colorful': {\n    width: '100%',\n    height: '100%',\n    boxShadow: '$level2',\n    cursor: 'crosshair'\n  },\n  '.react-colorful__saturation': {\n    borderRadius: '$sm $sm 0 0'\n  },\n  '.react-colorful__alpha, .react-colorful__hue': {\n    height: 10\n  },\n  '.react-colorful__last-control': {\n    borderRadius: '0 0 $sm $sm'\n  },\n  '.react-colorful__pointer': {\n    height: 12,\n    width: 12\n  }\n});\n\nfunction convertToRgb(value, format) {\n  return format !== 'rgb' ? colord(value).toRgb() : value;\n}\n\nfunction Color(_ref5) {\n  let {\n    value,\n    displayValue,\n    settings,\n    onUpdate\n  } = _ref5;\n  const {\n    emitOnEditStart,\n    emitOnEditEnd\n  } = useInputContext();\n  const {\n    format,\n    hasAlpha\n  } = settings;\n  const {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  } = usePopin();\n  const timer = useRef(0);\n  const [initialRgb, setInitialRgb] = useState(() => convertToRgb(value, format));\n  const ColorPicker = hasAlpha ? RgbaColorPicker : RgbColorPicker;\n\n  const showPicker = () => {\n    setInitialRgb(convertToRgb(value, format));\n    show();\n    emitOnEditStart();\n  };\n\n  const hidePicker = () => {\n    hide();\n    emitOnEditEnd();\n    window.clearTimeout(timer.current);\n  };\n\n  const hideAfterDelay = () => {\n    timer.current = window.setTimeout(hidePicker, 500);\n  };\n\n  useEffect(() => {\n    return () => window.clearTimeout(timer.current);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(ColorPreview, {\n    ref: popinRef,\n    active: shown,\n    onClick: () => showPicker(),\n    style: {\n      color: displayValue\n    }\n  }), shown && React.createElement(Portal, null, React.createElement(Overlay, {\n    onPointerUp: hidePicker\n  }), React.createElement(PickerWrapper, {\n    ref: wrapperRef,\n    onMouseEnter: () => window.clearTimeout(timer.current),\n    onMouseLeave: e => e.buttons === 0 && hideAfterDelay()\n  }, React.createElement(ColorPicker, {\n    color: initialRgb,\n    onChange: onUpdate\n  }))));\n}\n\nfunction ColorComponent() {\n  const {\n    value,\n    displayValue,\n    label,\n    onChange,\n    onUpdate,\n    settings\n  } = useInputContext();\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(PickerContainer, null, React.createElement(Color, {\n    value: value,\n    displayValue: displayValue,\n    onChange: onChange,\n    onUpdate: onUpdate,\n    settings: settings\n  }), React.createElement(ValueInput, {\n    value: displayValue,\n    onChange: onChange,\n    onUpdate: onUpdate\n  })));\n}\n\nvar color = createInternalPlugin(_objectSpread2({\n  component: ColorComponent\n}, props$2));\n\nfunction Vector3dComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = useInputContext();\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(Vector, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  }));\n}\n\nvar vector3d = createInternalPlugin(_objectSpread2({\n  component: Vector3dComponent\n}, getVectorPlugin(['x', 'y', 'z'])));\nconst JoystickTrigger = styled('div', {\n  $flexCenter: '',\n  position: 'relative',\n  backgroundColor: '$elevation3',\n  borderRadius: '$sm',\n  cursor: 'pointer',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  touchAction: 'none',\n  $draggable: '',\n  $hover: '',\n  '&:active': {\n    cursor: 'none'\n  },\n  '&::after': {\n    content: '\"\"',\n    backgroundColor: '$accent2',\n    height: 4,\n    width: 4,\n    borderRadius: 2\n  }\n});\nconst JoystickPlayground = styled('div', {\n  $flexCenter: '',\n  width: '$joystickWidth',\n  height: '$joystickHeight',\n  borderRadius: '$sm',\n  boxShadow: '$level2',\n  position: 'fixed',\n  zIndex: 10000,\n  overflow: 'hidden',\n  $draggable: '',\n  transform: 'translate(-50%, -50%)',\n  variants: {\n    isOutOfBounds: {\n      true: {\n        backgroundColor: '$elevation1'\n      },\n      false: {\n        backgroundColor: '$elevation3'\n      }\n    }\n  },\n  '> div': {\n    position: 'absolute',\n    $flexCenter: '',\n    borderStyle: 'solid',\n    borderWidth: 1,\n    borderColor: '$highlight1',\n    backgroundColor: '$elevation3',\n    width: '80%',\n    height: '80%',\n    '&::after,&::before': {\n      content: '\"\"',\n      position: 'absolute',\n      zindex: 10,\n      backgroundColor: '$highlight1'\n    },\n    '&::before': {\n      width: '100%',\n      height: 1\n    },\n    '&::after': {\n      height: '100%',\n      width: 1\n    }\n  },\n  '> span': {\n    position: 'relative',\n    zindex: 100,\n    width: 10,\n    height: 10,\n    backgroundColor: '$accent2',\n    borderRadius: '50%'\n  }\n});\n\nfunction Joystick(_ref6) {\n  let {\n    value,\n    settings,\n    onUpdate\n  } = _ref6;\n  const timeout = useRef();\n  const outOfBoundsX = useRef(0);\n  const outOfBoundsY = useRef(0);\n  const stepMultiplier = useRef(1);\n  const [joystickShown, setShowJoystick] = useState(false);\n  const [isOutOfBounds, setIsOutOfBounds] = useState(false);\n  const [spanRef, set] = useTransform();\n  const joystickeRef = useRef(null);\n  const playgroundRef = useRef(null);\n  useLayoutEffect(() => {\n    if (joystickShown) {\n      const {\n        top,\n        left,\n        width,\n        height\n      } = joystickeRef.current.getBoundingClientRect();\n      playgroundRef.current.style.left = left + width / 2 + 'px';\n      playgroundRef.current.style.top = top + height / 2 + 'px';\n    }\n  }, [joystickShown]);\n  const {\n    keys: [v1, v2],\n    joystick\n  } = settings;\n  const yFactor = joystick === 'invertY' ? 1 : -1;\n  const {\n    [v1]: {\n      step: stepV1\n    },\n    [v2]: {\n      step: stepV2\n    }\n  } = settings;\n  const wpx = useTh('sizes', 'joystickWidth');\n  const hpx = useTh('sizes', 'joystickHeight');\n  const w = parseFloat(wpx) * 0.8 / 2;\n  const h = parseFloat(hpx) * 0.8 / 2;\n  const startOutOfBounds = useCallback(() => {\n    if (timeout.current) return;\n    setIsOutOfBounds(true);\n    if (outOfBoundsX.current) set({\n      x: outOfBoundsX.current * w\n    });\n    if (outOfBoundsY.current) set({\n      y: outOfBoundsY.current * -h\n    });\n    timeout.current = window.setInterval(() => {\n      onUpdate(v => {\n        const incX = stepV1 * outOfBoundsX.current * stepMultiplier.current;\n        const incY = yFactor * stepV2 * outOfBoundsY.current * stepMultiplier.current;\n        return Array.isArray(v) ? {\n          [v1]: v[0] + incX,\n          [v2]: v[1] + incY\n        } : {\n          [v1]: v[v1] + incX,\n          [v2]: v[v2] + incY\n        };\n      });\n    }, 16);\n  }, [w, h, onUpdate, set, stepV1, stepV2, v1, v2, yFactor]);\n  const endOutOfBounds = useCallback(() => {\n    window.clearTimeout(timeout.current);\n    timeout.current = undefined;\n    setIsOutOfBounds(false);\n  }, []);\n  useEffect(() => {\n    function setStepMultiplier(event) {\n      stepMultiplier.current = multiplyStep(event);\n    }\n\n    window.addEventListener('keydown', setStepMultiplier);\n    window.addEventListener('keyup', setStepMultiplier);\n    return () => {\n      window.clearTimeout(timeout.current);\n      window.removeEventListener('keydown', setStepMultiplier);\n      window.removeEventListener('keyup', setStepMultiplier);\n    };\n  }, []);\n  const bind = useDrag(_ref7 => {\n    let {\n      first,\n      active,\n      delta: [dx, dy],\n      movement: [mx, my]\n    } = _ref7;\n    if (first) setShowJoystick(true);\n\n    const _x = clamp(mx, -w, w);\n\n    const _y = clamp(my, -h, h);\n\n    outOfBoundsX.current = Math.abs(mx) > Math.abs(_x) ? Math.sign(mx - _x) : 0;\n    outOfBoundsY.current = Math.abs(my) > Math.abs(_y) ? Math.sign(_y - my) : 0;\n    let newX = value[v1];\n    let newY = value[v2];\n\n    if (active) {\n      if (!outOfBoundsX.current) {\n        newX += dx * stepV1 * stepMultiplier.current;\n        set({\n          x: _x\n        });\n      }\n\n      if (!outOfBoundsY.current) {\n        newY -= yFactor * dy * stepV2 * stepMultiplier.current;\n        set({\n          y: _y\n        });\n      }\n\n      if (outOfBoundsX.current || outOfBoundsY.current) startOutOfBounds();else endOutOfBounds();\n      onUpdate({\n        [v1]: newX,\n        [v2]: newY\n      });\n    } else {\n      setShowJoystick(false);\n      outOfBoundsX.current = 0;\n      outOfBoundsY.current = 0;\n      set({\n        x: 0,\n        y: 0\n      });\n      endOutOfBounds();\n    }\n  });\n  return React.createElement(JoystickTrigger, _extends({\n    ref: joystickeRef\n  }, bind()), joystickShown && React.createElement(Portal, null, React.createElement(JoystickPlayground, {\n    ref: playgroundRef,\n    isOutOfBounds: isOutOfBounds\n  }, React.createElement(\"div\", null), React.createElement(\"span\", {\n    ref: spanRef\n  }))));\n}\n\nconst Container$1 = styled('div', {\n  display: 'grid',\n  columnGap: '$colGap',\n  variants: {\n    withJoystick: {\n      true: {\n        gridTemplateColumns: '$sizes$rowHeight auto'\n      },\n      false: {\n        gridTemplateColumns: 'auto'\n      }\n    }\n  }\n});\n\nfunction Vector2dComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = useInputContext();\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(Container$1, {\n    withJoystick: !!settings.joystick\n  }, settings.joystick && React.createElement(Joystick, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  }), React.createElement(Vector, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  })));\n}\n\nconst _excluded$7 = [\"joystick\"];\nconst plugin = getVectorPlugin(['x', 'y']);\n\nconst normalize$2 = _ref => {\n  let {\n    joystick = true\n  } = _ref,\n      input = _objectWithoutProperties(_ref, _excluded$7);\n\n  const {\n    value,\n    settings\n  } = plugin.normalize(input);\n  return {\n    value,\n    settings: _objectSpread2(_objectSpread2({}, settings), {}, {\n      joystick\n    })\n  };\n};\n\nvar vector2d = createInternalPlugin(_objectSpread2(_objectSpread2({\n  component: Vector2dComponent\n}, plugin), {}, {\n  normalize: normalize$2\n}));\n\nconst sanitize$1 = v => {\n  if (v === undefined) return undefined;\n\n  if (v instanceof File) {\n    try {\n      return URL.createObjectURL(v);\n    } catch (e) {\n      return undefined;\n    }\n  }\n\n  if (typeof v === 'string' && v.indexOf('blob:') === 0) return v;\n  throw Error(`Invalid image format [undefined | blob |Â File].`);\n};\n\nconst schema$1 = (_o, s) => typeof s === 'object' && 'image' in s;\n\nconst normalize$1 = _ref8 => {\n  let {\n    image\n  } = _ref8;\n  return {\n    value: image\n  };\n};\n\nvar props$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  sanitize: sanitize$1,\n  schema: schema$1,\n  normalize: normalize$1\n});\nconst ImageContainer = styled('div', {\n  position: 'relative',\n  display: 'grid',\n  gridTemplateColumns: '$sizes$rowHeight auto 20px',\n  columnGap: '$colGap',\n  alignItems: 'center'\n});\nconst DropZone = styled('div', {\n  $flexCenter: '',\n  overflow: 'hidden',\n  height: '$rowHeight',\n  background: '$elevation3',\n  textAlign: 'center',\n  color: 'inherit',\n  borderRadius: '$sm',\n  outline: 'none',\n  userSelect: 'none',\n  cursor: 'pointer',\n  $inputStyle: '',\n  $hover: '',\n  $focusWithin: '',\n  $active: '$accent1 $elevation1',\n  variants: {\n    isDragAccept: {\n      true: {\n        $inputStyle: '$accent1',\n        backgroundColor: '$elevation1'\n      }\n    }\n  }\n});\nconst ImagePreview = styled('div', {\n  boxSizing: 'border-box',\n  borderRadius: '$sm',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  $inputStyle: '',\n  backgroundSize: 'cover',\n  backgroundPosition: 'center',\n  variants: {\n    hasImage: {\n      true: {\n        cursor: 'pointer',\n        $hover: '',\n        $active: ''\n      }\n    }\n  }\n});\nconst ImageLargePreview = styled('div', {\n  $flexCenter: '',\n  width: '$imagePreviewWidth',\n  height: '$imagePreviewHeight',\n  borderRadius: '$sm',\n  boxShadow: '$level2',\n  pointerEvents: 'none',\n  $inputStyle: '',\n  backgroundSize: 'cover',\n  backgroundPosition: 'center'\n});\nconst Instructions = styled('div', {\n  fontSize: '0.8em',\n  height: '100%',\n  padding: '$rowGap $md'\n});\nconst Remove = styled('div', {\n  $flexCenter: '',\n  top: '0',\n  right: '0',\n  marginRight: '$sm',\n  height: '100%',\n  cursor: 'pointer',\n  variants: {\n    disabled: {\n      true: {\n        color: '$elevation3',\n        cursor: 'default'\n      }\n    }\n  },\n  '&::after,&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    height: 2,\n    width: 10,\n    borderRadius: 1,\n    backgroundColor: 'currentColor'\n  },\n  '&::after': {\n    transform: 'rotate(45deg)'\n  },\n  '&::before': {\n    transform: 'rotate(-45deg)'\n  }\n});\n\nfunction ImageComponent() {\n  const {\n    label,\n    value,\n    onUpdate,\n    disabled\n  } = useInputContext();\n  const {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  } = usePopin();\n  const onDrop = useCallback(acceptedFiles => {\n    if (acceptedFiles.length) onUpdate(acceptedFiles[0]);\n  }, [onUpdate]);\n  const clear = useCallback(e => {\n    e.stopPropagation();\n    onUpdate(undefined);\n  }, [onUpdate]);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragAccept\n  } = useDropzone({\n    maxFiles: 1,\n    accept: 'image/*',\n    onDrop,\n    disabled\n  });\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(ImageContainer, null, React.createElement(ImagePreview, {\n    ref: popinRef,\n    hasImage: !!value,\n    onPointerDown: () => !!value && show(),\n    onPointerUp: hide,\n    style: {\n      backgroundImage: value ? `url(${value})` : 'none'\n    }\n  }), shown && !!value && React.createElement(Portal, null, React.createElement(Overlay, {\n    onPointerUp: hide,\n    style: {\n      cursor: 'pointer'\n    }\n  }), React.createElement(ImageLargePreview, {\n    ref: wrapperRef,\n    style: {\n      backgroundImage: `url(${value})`\n    }\n  })), React.createElement(DropZone, getRootProps({\n    isDragAccept\n  }), React.createElement(\"input\", getInputProps()), React.createElement(Instructions, null, isDragAccept ? 'drop image' : 'click or drop')), React.createElement(Remove, {\n    onClick: clear,\n    disabled: !value\n  })));\n}\n\nvar image = createInternalPlugin(_objectSpread2({\n  component: ImageComponent\n}, props$1));\nconst number = v8n().number();\n\nconst schema = (o, s) => v8n().array().length(2).every.number().test(o) && v8n().schema({\n  min: number,\n  max: number\n}).test(s);\n\nconst format = v => ({\n  min: v[0],\n  max: v[1]\n});\n\nconst sanitize = (value, _ref9, prevValue) => {\n  let {\n    bounds: [MIN, MAX]\n  } = _ref9;\n\n  const _value = Array.isArray(value) ? format(value) : value;\n\n  const _newValue = {\n    min: prevValue[0],\n    max: prevValue[1]\n  };\n\n  const {\n    min,\n    max\n  } = _objectSpread2(_objectSpread2({}, _newValue), _value);\n\n  return [clamp(Number(min), MIN, Math.max(MIN, max)), clamp(Number(max), Math.min(MAX, min), MAX)];\n};\n\nconst normalize = _ref10 => {\n  let {\n    value,\n    min,\n    max\n  } = _ref10;\n  const boundsSettings = {\n    min,\n    max\n  };\n\n  const _settings = normalizeKeyedNumberSettings(format(value), {\n    min: boundsSettings,\n    max: boundsSettings\n  });\n\n  const bounds = [min, max];\n\n  const settings = _objectSpread2(_objectSpread2({}, _settings), {}, {\n    bounds\n  });\n\n  const _value = sanitize(format(value), settings, value);\n\n  return {\n    value: _value,\n    settings\n  };\n};\n\nvar props = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schema: schema,\n  format: format,\n  sanitize: sanitize,\n  normalize: normalize\n});\nconst _excluded$6 = [\"value\", \"bounds\", \"onDrag\"],\n      _excluded2$1 = [\"bounds\"];\nconst Container = styled('div', {\n  display: 'grid',\n  columnGap: '$colGap',\n  gridTemplateColumns: 'auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)'\n});\n\nfunction IntervalSlider(_ref) {\n  let {\n    value,\n    bounds: [min, max],\n    onDrag\n  } = _ref,\n      settings = _objectWithoutProperties(_ref, _excluded$6);\n\n  const ref = useRef(null);\n  const minScrubberRef = useRef(null);\n  const maxScrubberRef = useRef(null);\n  const rangeWidth = useRef(0);\n  const scrubberWidth = useTh('sizes', 'scrubberWidth');\n  const bind = useDrag(_ref11 => {\n    let {\n      event,\n      first,\n      xy: [x],\n      movement: [mx],\n      memo: _memo = {}\n    } = _ref11;\n\n    if (first) {\n      const {\n        width,\n        left\n      } = ref.current.getBoundingClientRect();\n      rangeWidth.current = width - parseFloat(scrubberWidth);\n      const targetIsScrub = (event === null || event === void 0 ? void 0 : event.target) === minScrubberRef.current || (event === null || event === void 0 ? void 0 : event.target) === maxScrubberRef.current;\n      _memo.pos = invertedRange((x - left) / width, min, max);\n      const delta = Math.abs(_memo.pos - value.min) - Math.abs(_memo.pos - value.max);\n      _memo.key = delta < 0 || delta === 0 && _memo.pos <= value.min ? 'min' : 'max';\n      if (targetIsScrub) _memo.pos = value[_memo.key];\n    }\n\n    const newValue = _memo.pos + invertedRange(mx / rangeWidth.current, 0, max - min);\n    onDrag({\n      [_memo.key]: sanitizeStep(newValue, settings[_memo.key])\n    });\n    return _memo;\n  });\n  const minStyle = `calc(${range(value.min, min, max)} * (100% - ${scrubberWidth} - 8px) + 4px)`;\n  const maxStyle = `calc(${1 - range(value.max, min, max)} * (100% - ${scrubberWidth} - 8px) + 4px)`;\n  return React.createElement(RangeWrapper, _extends({\n    ref: ref\n  }, bind()), React.createElement(Range, null, React.createElement(Indicator, {\n    style: {\n      left: minStyle,\n      right: maxStyle\n    }\n  })), React.createElement(Scrubber, {\n    position: \"left\",\n    ref: minScrubberRef,\n    style: {\n      left: minStyle\n    }\n  }), React.createElement(Scrubber, {\n    position: \"right\",\n    ref: maxScrubberRef,\n    style: {\n      right: maxStyle\n    }\n  }));\n}\n\nfunction IntervalComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = useInputContext();\n\n  const _settings = _objectWithoutProperties(settings, _excluded2$1);\n\n  return React.createElement(React.Fragment, null, React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(Container, null, React.createElement(IntervalSlider, _extends({\n    value: displayValue\n  }, settings, {\n    onDrag: onUpdate\n  })), React.createElement(Vector, {\n    value: displayValue,\n    settings: _settings,\n    onUpdate: onUpdate,\n    innerLabelTrim: 0\n  }))));\n}\n\nvar interval = createInternalPlugin(_objectSpread2({\n  component: IntervalComponent\n}, props));\n\nconst createEventEmitter = () => {\n  const listenerMapping = new Map();\n  return {\n    on: (topic, listener) => {\n      let listeners = listenerMapping.get(topic);\n\n      if (listeners === undefined) {\n        listeners = new Set();\n        listenerMapping.set(topic, listeners);\n      }\n\n      listeners.add(listener);\n    },\n    off: (topic, listener) => {\n      const listeners = listenerMapping.get(topic);\n\n      if (listeners === undefined) {\n        return;\n      }\n\n      listeners.delete(listener);\n\n      if (listeners.size === 0) {\n        listenerMapping.delete(topic);\n      }\n    },\n    emit: function (topic) {\n      const listeners = listenerMapping.get(topic);\n\n      if (listeners === undefined) {\n        return;\n      }\n\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      for (const listener of listeners) {\n        listener(...args);\n      }\n    }\n  };\n};\n\nconst _excluded$5 = [\"type\", \"value\"],\n      _excluded2 = [\"onChange\", \"transient\", \"onEditStart\", \"onEditEnd\"];\n\nconst Store = function Store() {\n  const store = create(subscribeWithSelector(() => ({\n    data: {}\n  })));\n  const eventEmitter = createEventEmitter();\n  this.storeId = getUid();\n  this.useStore = store;\n  const folders = {};\n  const orderedPaths = new Set();\n\n  this.getVisiblePaths = () => {\n    const data = this.getData();\n    const paths = Object.keys(data);\n    const hiddenFolders = [];\n    Object.entries(folders).forEach(_ref12 => {\n      let [path, settings] = _ref12;\n      if (settings.render && paths.some(p => p.indexOf(path) === 0) && !settings.render(this.get)) hiddenFolders.push(path + '.');\n    });\n    const visiblePaths = [];\n    orderedPaths.forEach(path => {\n      if (path in data && data[path].__refCount > 0 && hiddenFolders.every(p => path.indexOf(p) === -1) && (!data[path].render || data[path].render(this.get))) {\n        visiblePaths.push(path);\n      }\n    });\n    return visiblePaths;\n  };\n\n  this.setOrderedPaths = newPaths => {\n    newPaths.forEach(p => orderedPaths.add(p));\n  };\n\n  this.orderPaths = paths => {\n    this.setOrderedPaths(paths);\n    return paths;\n  };\n\n  this.disposePaths = paths => {\n    store.setState(s => {\n      const data = s.data;\n      paths.forEach(path => {\n        if (path in data) {\n          const input = data[path];\n          input.__refCount--;\n\n          if (input.__refCount === 0 && input.type in SpecialInputs) {\n            delete data[path];\n          }\n        }\n      });\n      return {\n        data\n      };\n    });\n  };\n\n  this.dispose = () => {\n    store.setState(() => {\n      return {\n        data: {}\n      };\n    });\n  };\n\n  this.getFolderSettings = path => {\n    return folders[path] || {};\n  };\n\n  this.getData = () => {\n    return store.getState().data;\n  };\n\n  this.addData = (newData, override) => {\n    store.setState(s => {\n      const data = s.data;\n      Object.entries(newData).forEach(_ref13 => {\n        let [path, newInputData] = _ref13;\n        let input = data[path];\n\n        if (!!input) {\n          const {\n            type,\n            value\n          } = newInputData,\n                rest = _objectWithoutProperties(newInputData, _excluded$5);\n\n          if (type !== input.type) {\n            warn(LevaErrors.INPUT_TYPE_OVERRIDE, type);\n          } else {\n            if (input.__refCount === 0 || override) {\n              Object.assign(input, rest);\n            }\n\n            input.__refCount++;\n          }\n        } else {\n          data[path] = _objectSpread2(_objectSpread2({}, newInputData), {}, {\n            __refCount: 1\n          });\n        }\n      });\n      return {\n        data\n      };\n    });\n  };\n\n  this.setValueAtPath = (path, value, fromPanel) => {\n    store.setState(s => {\n      const data = s.data;\n      updateInput(data[path], value, path, this, fromPanel);\n      return {\n        data\n      };\n    });\n  };\n\n  this.setSettingsAtPath = (path, settings) => {\n    store.setState(s => {\n      const data = s.data;\n      data[path].settings = _objectSpread2(_objectSpread2({}, data[path].settings), settings);\n      return {\n        data\n      };\n    });\n  };\n\n  this.disableInputAtPath = (path, flag) => {\n    store.setState(s => {\n      const data = s.data;\n      data[path].disabled = flag;\n      return {\n        data\n      };\n    });\n  };\n\n  this.set = (values, fromPanel) => {\n    store.setState(s => {\n      const data = s.data;\n      Object.entries(values).forEach(_ref14 => {\n        let [path, value] = _ref14;\n\n        try {\n          updateInput(data[path], value, undefined, undefined, fromPanel);\n        } catch (e) {\n          if (process.env.NODE_ENV === 'development') {\n            console.warn(`[This message will only show in development]: \\`set\\` for path ${path} has failed.`, e);\n          }\n        }\n      });\n      return {\n        data\n      };\n    });\n  };\n\n  this.getInput = path => {\n    try {\n      return this.getData()[path];\n    } catch (e) {\n      warn(LevaErrors.PATH_DOESNT_EXIST, path);\n    }\n  };\n\n  this.get = path => {\n    var _this$getInput;\n\n    return (_this$getInput = this.getInput(path)) === null || _this$getInput === void 0 ? void 0 : _this$getInput.value;\n  };\n\n  this.emitOnEditStart = path => {\n    eventEmitter.emit(`onEditStart:${path}`, this.get(path), path, _objectSpread2(_objectSpread2({}, this.getInput(path)), {}, {\n      get: this.get\n    }));\n  };\n\n  this.emitOnEditEnd = path => {\n    eventEmitter.emit(`onEditEnd:${path}`, this.get(path), path, _objectSpread2(_objectSpread2({}, this.getInput(path)), {}, {\n      get: this.get\n    }));\n  };\n\n  this.subscribeToEditStart = (path, listener) => {\n    const _path = `onEditStart:${path}`;\n    eventEmitter.on(_path, listener);\n    return () => eventEmitter.off(_path, listener);\n  };\n\n  this.subscribeToEditEnd = (path, listener) => {\n    const _path = `onEditEnd:${path}`;\n    eventEmitter.on(_path, listener);\n    return () => eventEmitter.off(_path, listener);\n  };\n\n  const _getDataFromSchema = (schema, rootPath, mappedPaths) => {\n    const data = {};\n    Object.entries(schema).forEach(_ref15 => {\n      let [key, rawInput] = _ref15;\n      if (key === '') return warn(LevaErrors.EMPTY_KEY);\n      let newPath = join(rootPath, key);\n\n      if (rawInput.type === SpecialInputs.FOLDER) {\n        const newData = _getDataFromSchema(rawInput.schema, newPath, mappedPaths);\n\n        Object.assign(data, newData);\n        if (!(newPath in folders)) folders[newPath] = rawInput.settings;\n      } else if (key in mappedPaths) {\n        warn(LevaErrors.DUPLICATE_KEYS, key, newPath, mappedPaths[key].path);\n      } else {\n        const normalizedInput = normalizeInput(rawInput, key, newPath, data);\n\n        if (normalizedInput) {\n          const {\n            type,\n            options,\n            input\n          } = normalizedInput;\n\n          const {\n            onChange,\n            transient,\n            onEditStart,\n            onEditEnd\n          } = options,\n                _options = _objectWithoutProperties(options, _excluded2);\n\n          data[newPath] = _objectSpread2(_objectSpread2(_objectSpread2({\n            type\n          }, _options), input), {}, {\n            fromPanel: true\n          });\n          mappedPaths[key] = {\n            path: newPath,\n            onChange,\n            transient,\n            onEditStart,\n            onEditEnd\n          };\n        } else {\n          warn(LevaErrors.UNKNOWN_INPUT, newPath, rawInput);\n        }\n      }\n    });\n    return data;\n  };\n\n  this.getDataFromSchema = schema => {\n    const mappedPaths = {};\n\n    const data = _getDataFromSchema(schema, '', mappedPaths);\n\n    return [data, mappedPaths];\n  };\n};\n\nconst levaStore = new Store();\n\nfunction useCreateStore() {\n  return useMemo(() => new Store(), []);\n}\n\nif (process.env.NODE_ENV === 'development' && typeof window !== 'undefined') {\n  window.__STORE = levaStore;\n}\n\nconst defaultSettings$2 = {\n  collapsed: false\n};\n\nfunction folder(schema, settings) {\n  return {\n    type: SpecialInputs.FOLDER,\n    schema,\n    settings: _objectSpread2(_objectSpread2({}, defaultSettings$2), settings)\n  };\n}\n\nconst defaultSettings$1 = {\n  disabled: false\n};\n\nfunction button(onClick, settings) {\n  return {\n    type: SpecialInputs.BUTTON,\n    onClick,\n    settings: _objectSpread2(_objectSpread2({}, defaultSettings$1), settings)\n  };\n}\n\nfunction buttonGroup(opts) {\n  return {\n    type: SpecialInputs.BUTTON_GROUP,\n    opts\n  };\n}\n\nconst defaultSettings = {\n  graph: false,\n  interval: 100\n};\n\nfunction monitor(objectOrFn, settings) {\n  return {\n    type: SpecialInputs.MONITOR,\n    objectOrFn,\n    settings: _objectSpread2(_objectSpread2({}, defaultSettings), settings)\n  };\n}\n\nconst isInput = v => '__levaInput' in v;\n\nconst buildTree = (paths, filter) => {\n  const tree = {};\n\n  const _filter = filter ? filter.toLowerCase() : null;\n\n  paths.forEach(path => {\n    const [valueKey, folderPath] = getKeyPath(path);\n\n    if (!_filter || valueKey.toLowerCase().indexOf(_filter) > -1) {\n      merge(tree, folderPath, {\n        [valueKey]: {\n          __levaInput: true,\n          path\n        }\n      });\n    }\n  });\n  return tree;\n};\n\nconst _excluded$4 = [\"type\", \"label\", \"path\", \"valueKey\", \"value\", \"settings\", \"setValue\", \"disabled\"];\n\nfunction ControlInput(_ref) {\n  let {\n    type,\n    label,\n    path,\n    valueKey,\n    value,\n    settings,\n    setValue,\n    disabled\n  } = _ref,\n      rest = _objectWithoutProperties(_ref, _excluded$4);\n\n  const {\n    displayValue,\n    onChange,\n    onUpdate\n  } = useInputSetters({\n    type,\n    value,\n    settings,\n    setValue\n  });\n  const Input = Plugins[type].component;\n\n  if (!Input) {\n    warn(LevaErrors.NO_COMPONENT_FOR_TYPE, type, path);\n    return null;\n  }\n\n  return React.createElement(InputContext.Provider, {\n    value: _objectSpread2({\n      key: valueKey,\n      path,\n      id: '' + path,\n      label,\n      displayValue,\n      value,\n      onChange,\n      onUpdate,\n      settings,\n      setValue,\n      disabled\n    }, rest)\n  }, React.createElement(StyledInputWrapper, {\n    disabled: disabled\n  }, React.createElement(Input, null)));\n}\n\nconst StyledButton = styled('button', {\n  display: 'block',\n  $reset: '',\n  fontWeight: '$button',\n  height: '$rowHeight',\n  borderStyle: 'none',\n  borderRadius: '$sm',\n  backgroundColor: '$elevation1',\n  color: '$highlight1',\n  '&:not(:disabled)': {\n    color: '$highlight3',\n    backgroundColor: '$accent2',\n    cursor: 'pointer',\n    $hover: '$accent3',\n    $active: '$accent3 $accent1',\n    $focus: ''\n  }\n});\n\nfunction Button(_ref16) {\n  let {\n    onClick,\n    settings,\n    label\n  } = _ref16;\n  const store = useStoreContext();\n  return React.createElement(Row, null, React.createElement(StyledButton, {\n    disabled: settings.disabled,\n    onClick: () => onClick(store.get)\n  }, label));\n}\n\nconst StyledButtonGroup = styled('div', {\n  $flex: '',\n  justifyContent: 'flex-end',\n  gap: '$colGap'\n});\nconst StyledButtonGroupButton = styled('button', {\n  $reset: '',\n  cursor: 'pointer',\n  borderRadius: '$xs',\n  '&:hover': {\n    backgroundColor: '$elevation3'\n  }\n});\n\nconst getOpts = _ref17 => {\n  let {\n    label: _label,\n    opts: _opts\n  } = _ref17;\n  let label = typeof _label === 'string' ? _label.trim() === '' ? null : _label : _label;\n  let opts = _opts;\n\n  if (typeof _opts.opts === 'object') {\n    if (opts.label !== undefined) {\n      label = _opts.label;\n    }\n\n    opts = _opts.opts;\n  }\n\n  return {\n    label,\n    opts: opts\n  };\n};\n\nfunction ButtonGroup(props) {\n  const {\n    label,\n    opts\n  } = getOpts(props);\n  const store = useStoreContext();\n  return React.createElement(Row, {\n    input: !!label\n  }, label && React.createElement(Label, null, label), React.createElement(StyledButtonGroup, null, Object.entries(opts).map(_ref18 => {\n    let [label, onClick] = _ref18;\n    return React.createElement(StyledButtonGroupButton, {\n      key: label,\n      onClick: () => onClick(store.get)\n    }, label);\n  })));\n}\n\nconst Canvas = styled('canvas', {\n  height: '$monitorHeight',\n  width: '100%',\n  display: 'block',\n  borderRadius: '$sm'\n});\nconst POINTS = 100;\n\nfunction push(arr, val) {\n  arr.push(val);\n  if (arr.length > POINTS) arr.shift();\n}\n\nconst MonitorCanvas = forwardRef(function (_ref19, ref) {\n  let {\n    initialValue\n  } = _ref19;\n  const accentColor = useTh('colors', 'highlight3');\n  const backgroundColor = useTh('colors', 'elevation2');\n  const fillColor = useTh('colors', 'highlight1');\n  const [gradientTop, gradientBottom] = useMemo(() => {\n    return [colord(fillColor).alpha(0.4).toRgbString(), colord(fillColor).alpha(0.1).toRgbString()];\n  }, [fillColor]);\n  const points = useRef([initialValue]);\n  const min = useRef(initialValue);\n  const max = useRef(initialValue);\n  const raf = useRef();\n  const drawPlot = useCallback((_canvas, _ctx) => {\n    if (!_canvas) return;\n    const {\n      width,\n      height\n    } = _canvas;\n    const path = new Path2D();\n    const interval = width / POINTS;\n    const verticalPadding = height * 0.05;\n\n    for (let i = 0; i < points.current.length; i++) {\n      const p = range(points.current[i], min.current, max.current);\n      const x = interval * i;\n      const y = height - p * (height - verticalPadding * 2) - verticalPadding;\n      path.lineTo(x, y);\n    }\n\n    _ctx.clearRect(0, 0, width, height);\n\n    const gradientPath = new Path2D(path);\n    gradientPath.lineTo(interval * (points.current.length + 1), height);\n    gradientPath.lineTo(0, height);\n    gradientPath.lineTo(0, 0);\n\n    const gradient = _ctx.createLinearGradient(0, 0, 0, height);\n\n    gradient.addColorStop(0.0, gradientTop);\n    gradient.addColorStop(1.0, gradientBottom);\n    _ctx.fillStyle = gradient;\n\n    _ctx.fill(gradientPath);\n\n    _ctx.strokeStyle = backgroundColor;\n    _ctx.lineJoin = 'round';\n    _ctx.lineWidth = 14;\n\n    _ctx.stroke(path);\n\n    _ctx.strokeStyle = accentColor;\n    _ctx.lineWidth = 2;\n\n    _ctx.stroke(path);\n  }, [accentColor, backgroundColor, gradientTop, gradientBottom]);\n  const [canvas, ctx] = useCanvas2d(drawPlot);\n  useImperativeHandle(ref, () => ({\n    frame: val => {\n      if (min.current === undefined || val < min.current) min.current = val;\n      if (max.current === undefined || val > max.current) max.current = val;\n      push(points.current, val);\n      raf.current = requestAnimationFrame(() => drawPlot(canvas.current, ctx.current));\n    }\n  }), [canvas, ctx, drawPlot]);\n  useEffect(() => () => cancelAnimationFrame(raf.current), []);\n  return React.createElement(Canvas, {\n    ref: canvas\n  });\n});\n\nconst parse = val => Number.isFinite(val) ? val.toPrecision(2) : val.toString();\n\nconst MonitorLog = forwardRef(function (_ref20, ref) {\n  let {\n    initialValue\n  } = _ref20;\n  const [val, set] = useState(parse(initialValue));\n  useImperativeHandle(ref, () => ({\n    frame: v => set(parse(v))\n  }), []);\n  return React.createElement(\"div\", null, val);\n});\n\nfunction getValue(o) {\n  return typeof o === 'function' ? o() : o.current;\n}\n\nfunction Monitor(_ref21) {\n  let {\n    label,\n    objectOrFn,\n    settings\n  } = _ref21;\n  const ref = useRef();\n  const initialValue = useRef(getValue(objectOrFn));\n  useEffect(() => {\n    const timeout = window.setInterval(() => {\n      var _ref$current;\n\n      if (document.hidden) return;\n      (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.frame(getValue(objectOrFn));\n    }, settings.interval);\n    return () => window.clearInterval(timeout);\n  }, [objectOrFn, settings.interval]);\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, {\n    align: \"top\"\n  }, label), settings.graph ? React.createElement(MonitorCanvas, {\n    ref: ref,\n    initialValue: initialValue.current\n  }) : React.createElement(MonitorLog, {\n    ref: ref,\n    initialValue: initialValue.current\n  }));\n}\n\nconst _excluded$3 = [\"type\", \"label\", \"key\"];\nconst specialComponents = {\n  [SpecialInputs.BUTTON]: Button,\n  [SpecialInputs.BUTTON_GROUP]: ButtonGroup,\n  [SpecialInputs.MONITOR]: Monitor\n};\nconst Control = React.memo(_ref22 => {\n  let {\n    path\n  } = _ref22;\n  const [input, {\n    set,\n    setSettings,\n    disable,\n    storeId,\n    emitOnEditStart,\n    emitOnEditEnd\n  }] = useInput(path);\n  if (!input) return null;\n\n  const {\n    type,\n    label,\n    key\n  } = input,\n        inputProps = _objectWithoutProperties(input, _excluded$3);\n\n  if (type in SpecialInputs) {\n    const SpecialInputForType = specialComponents[type];\n    return React.createElement(SpecialInputForType, _extends({\n      label: label,\n      path: path\n    }, inputProps));\n  }\n\n  if (!(type in Plugins)) {\n    log(LevaErrors.UNSUPPORTED_INPUT, type, path);\n    return null;\n  }\n\n  return React.createElement(ControlInput, _extends({\n    key: storeId + path,\n    type: type,\n    label: label,\n    storeId: storeId,\n    path: path,\n    valueKey: key,\n    setValue: set,\n    setSettings: setSettings,\n    disable: disable,\n    emitOnEditStart: emitOnEditStart,\n    emitOnEditEnd: emitOnEditEnd\n  }, inputProps));\n});\n\nfunction FolderTitle(_ref23) {\n  let {\n    toggle,\n    toggled,\n    name\n  } = _ref23;\n  return React.createElement(StyledTitle, {\n    onClick: () => toggle()\n  }, React.createElement(Chevron, {\n    toggled: toggled\n  }), React.createElement(\"div\", null, name));\n}\n\nconst Folder = _ref24 => {\n  let {\n    name,\n    path,\n    tree\n  } = _ref24;\n  const store = useStoreContext();\n  const newPath = join(path, name);\n  const {\n    collapsed,\n    color\n  } = store.getFolderSettings(newPath);\n  const [toggled, setToggle] = useState(!collapsed);\n  const folderRef = useRef(null);\n  const widgetColor = useTh('colors', 'folderWidgetColor');\n  const textColor = useTh('colors', 'folderTextColor');\n  useLayoutEffect(() => {\n    folderRef.current.style.setProperty('--leva-colors-folderWidgetColor', color || widgetColor);\n    folderRef.current.style.setProperty('--leva-colors-folderTextColor', color || textColor);\n  }, [color, widgetColor, textColor]);\n  return React.createElement(StyledFolder, {\n    ref: folderRef\n  }, React.createElement(FolderTitle, {\n    name: name,\n    toggled: toggled,\n    toggle: () => setToggle(t => !t)\n  }), React.createElement(TreeWrapper, {\n    parent: newPath,\n    tree: tree,\n    toggled: toggled\n  }));\n};\n\nconst TreeWrapper = React.memo(_ref25 => {\n  let {\n    isRoot: _isRoot = false,\n    fill: _fill = false,\n    flat: _flat = false,\n    parent,\n    tree,\n    toggled\n  } = _ref25;\n  const {\n    wrapperRef,\n    contentRef\n  } = useToggle(toggled);\n  const store = useStoreContext();\n\n  const getOrder = _ref26 => {\n    let [key, o] = _ref26;\n\n    var _store$getInput;\n\n    const order = isInput(o) ? (_store$getInput = store.getInput(o.path)) === null || _store$getInput === void 0 ? void 0 : _store$getInput.order : store.getFolderSettings(join(parent, key)).order;\n    return order || 0;\n  };\n\n  const entries = Object.entries(tree).sort((a, b) => getOrder(a) - getOrder(b));\n  return React.createElement(StyledWrapper, {\n    ref: wrapperRef,\n    isRoot: _isRoot,\n    fill: _fill,\n    flat: _flat\n  }, React.createElement(StyledContent, {\n    ref: contentRef,\n    isRoot: _isRoot,\n    toggled: toggled\n  }, entries.map(_ref27 => {\n    let [key, value] = _ref27;\n    return isInput(value) ? React.createElement(Control, {\n      key: value.path,\n      valueKey: value.valueKey,\n      path: value.path\n    }) : React.createElement(Folder, {\n      key: key,\n      name: key,\n      path: parent,\n      tree: value\n    });\n  })));\n});\nconst StyledRoot = styled('div', {\n  position: 'relative',\n  fontFamily: '$mono',\n  fontSize: '$root',\n  color: '$rootText',\n  backgroundColor: '$elevation1',\n  variants: {\n    fill: {\n      false: {\n        position: 'fixed',\n        top: '10px',\n        right: '10px',\n        zIndex: 1000,\n        width: '$rootWidth'\n      },\n      true: {\n        position: 'relative',\n        width: '100%'\n      }\n    },\n    flat: {\n      false: {\n        borderRadius: '$lg',\n        boxShadow: '$level1'\n      }\n    },\n    oneLineLabels: {\n      true: {\n        [`${StyledInputRow}`]: {\n          gridTemplateColumns: 'auto',\n          gridAutoColumns: 'minmax(max-content, 1fr)',\n          gridAutoRows: 'minmax($sizes$rowHeight), auto)',\n          rowGap: 0,\n          columnGap: 0,\n          marginTop: '$rowGap'\n        }\n      }\n    },\n    hideTitleBar: {\n      true: {\n        $$titleBarHeight: '0px'\n      },\n      false: {\n        $$titleBarHeight: '$sizes$titleBarHeight'\n      }\n    }\n  },\n  '&,*,*:after,*:before': {\n    boxSizing: 'border-box'\n  },\n  '*::selection': {\n    backgroundColor: '$accent2'\n  }\n});\nconst iconWidth = 40;\nconst Icon = styled('i', {\n  $flexCenter: '',\n  width: iconWidth,\n  userSelect: 'none',\n  cursor: 'pointer',\n  '> svg': {\n    fill: '$highlight1',\n    transition: 'transform 350ms ease, fill 250ms ease'\n  },\n  '&:hover > svg': {\n    fill: '$highlight3'\n  },\n  variants: {\n    active: {\n      true: {\n        '> svg': {\n          fill: '$highlight2'\n        }\n      }\n    }\n  }\n});\nconst StyledTitleWithFilter = styled('div', {\n  display: 'flex',\n  alignItems: 'stretch',\n  justifyContent: 'space-between',\n  height: '$titleBarHeight',\n  variants: {\n    mode: {\n      drag: {\n        cursor: 'grab'\n      }\n    }\n  }\n});\nconst FilterWrapper = styled('div', {\n  $flex: '',\n  position: 'relative',\n  width: '100%',\n  overflow: 'hidden',\n  transition: 'height 250ms ease',\n  color: '$highlight3',\n  paddingLeft: '$md',\n  [`> ${Icon}`]: {\n    height: 30\n  },\n  variants: {\n    toggled: {\n      true: {\n        height: 30\n      },\n      false: {\n        height: 0\n      }\n    }\n  }\n});\nconst StyledFilterInput = styled('input', {\n  $reset: '',\n  flex: 1,\n  position: 'relative',\n  height: 30,\n  width: '100%',\n  backgroundColor: 'transparent',\n  fontSize: '10px',\n  borderRadius: '$root',\n  '&:focus': {},\n  '&::placeholder': {\n    color: '$highlight2'\n  }\n});\nconst TitleContainer = styled('div', {\n  touchAction: 'none',\n  $flexCenter: '',\n  flex: 1,\n  '> svg': {\n    fill: '$highlight1'\n  },\n  color: '$highlight1',\n  variants: {\n    drag: {\n      true: {\n        $draggable: '',\n        '> svg': {\n          transition: 'fill 250ms ease'\n        },\n        '&:hover': {\n          color: '$highlight3'\n        },\n        '&:hover > svg': {\n          fill: '$highlight3'\n        }\n      }\n    },\n    filterEnabled: {\n      false: {\n        paddingRight: iconWidth\n      }\n    }\n  }\n});\nconst FilterInput = React.forwardRef((_ref28, ref) => {\n  let {\n    setFilter,\n    toggle\n  } = _ref28;\n  const [value, set] = useState('');\n  const debouncedOnChange = useMemo(() => debounce(setFilter, 250), [setFilter]);\n\n  const clear = () => {\n    setFilter('');\n    set('');\n  };\n\n  const _onChange = e => {\n    const v = e.currentTarget.value;\n    toggle(true);\n    set(v);\n  };\n\n  useEffect(() => {\n    debouncedOnChange(value);\n  }, [value, debouncedOnChange]);\n  return React.createElement(React.Fragment, null, React.createElement(StyledFilterInput, {\n    ref: ref,\n    value: value,\n    placeholder: \"[Open filter with CMD+SHIFT+L]\",\n    onPointerDown: e => e.stopPropagation(),\n    onChange: _onChange\n  }), React.createElement(Icon, {\n    onClick: () => clear(),\n    style: {\n      visibility: value ? 'visible' : 'hidden'\n    }\n  }, React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"14\",\n    width: \"14\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\"\n  }, React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n    clipRule: \"evenodd\"\n  }))));\n});\n\nfunction TitleWithFilter(_ref29) {\n  let {\n    setFilter,\n    onDrag,\n    onDragStart,\n    onDragEnd,\n    toggle,\n    toggled,\n    title,\n    drag,\n    filterEnabled,\n    from\n  } = _ref29;\n  const [filterShown, setShowFilter] = useState(false);\n  const inputRef = useRef(null);\n  useEffect(() => {\n    var _inputRef$current, _inputRef$current2;\n\n    if (filterShown) (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();else (_inputRef$current2 = inputRef.current) === null || _inputRef$current2 === void 0 ? void 0 : _inputRef$current2.blur();\n  }, [filterShown]);\n  const bind = useDrag(_ref30 => {\n    let {\n      offset: [x, y],\n      first,\n      last\n    } = _ref30;\n    onDrag({\n      x,\n      y\n    });\n\n    if (first) {\n      onDragStart({\n        x,\n        y\n      });\n    }\n\n    if (last) {\n      onDragEnd({\n        x,\n        y\n      });\n    }\n  }, {\n    filterTaps: true,\n    from: _ref31 => {\n      let {\n        offset: [x, y]\n      } = _ref31;\n      return [(from === null || from === void 0 ? void 0 : from.x) || x, (from === null || from === void 0 ? void 0 : from.y) || y];\n    }\n  });\n  useEffect(() => {\n    const handleShortcut = event => {\n      if (event.key === 'L' && event.shiftKey && event.metaKey) {\n        setShowFilter(f => !f);\n      }\n    };\n\n    window.addEventListener('keydown', handleShortcut);\n    return () => window.removeEventListener('keydown', handleShortcut);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(StyledTitleWithFilter, {\n    mode: drag ? 'drag' : undefined\n  }, React.createElement(Icon, {\n    active: !toggled,\n    onClick: () => toggle()\n  }, React.createElement(Chevron, {\n    toggled: toggled,\n    width: 12,\n    height: 8\n  })), React.createElement(TitleContainer, _extends({}, drag ? bind() : {}, {\n    drag: drag,\n    filterEnabled: filterEnabled\n  }), title === undefined && drag ? React.createElement(\"svg\", {\n    width: \"20\",\n    height: \"10\",\n    viewBox: \"0 0 28 14\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"circle\", {\n    cx: \"2\",\n    cy: \"2\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"14\",\n    cy: \"2\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"26\",\n    cy: \"2\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"2\",\n    cy: \"12\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"14\",\n    cy: \"12\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"26\",\n    cy: \"12\",\n    r: \"2\"\n  })) : title), filterEnabled && React.createElement(Icon, {\n    active: filterShown,\n    onClick: () => setShowFilter(f => !f)\n  }, React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"20\",\n    viewBox: \"0 0 20 20\"\n  }, React.createElement(\"path\", {\n    d: \"M9 9a2 2 0 114 0 2 2 0 01-4 0z\"\n  }), React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z\",\n    clipRule: \"evenodd\"\n  })))), React.createElement(FilterWrapper, {\n    toggled: filterShown\n  }, React.createElement(FilterInput, {\n    ref: inputRef,\n    setFilter: setFilter,\n    toggle: toggle\n  })));\n}\n\nconst _excluded$2 = [\"store\", \"hidden\", \"theme\", \"collapsed\"];\n\nfunction LevaRoot(_ref) {\n  let {\n    store,\n    hidden = false,\n    theme,\n    collapsed = false\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded$2);\n\n  const themeContext = useDeepMemo(() => mergeTheme(theme), [theme]);\n  const [toggled, setToggle] = useState(!collapsed);\n  const computedToggled = typeof collapsed === 'object' ? !collapsed.collapsed : toggled;\n  const computedSetToggle = useMemo(() => {\n    if (typeof collapsed === 'object') {\n      return value => {\n        if (typeof value === 'function') {\n          collapsed.onChange(!value(!collapsed.collapsed));\n        } else {\n          collapsed.onChange(!value);\n        }\n      };\n    }\n\n    return setToggle;\n  }, [collapsed]);\n  if (!store || hidden) return null;\n  return React.createElement(ThemeContext.Provider, {\n    value: themeContext\n  }, React.createElement(LevaCore, _extends({\n    store: store\n  }, props, {\n    toggled: computedToggled,\n    setToggle: computedSetToggle,\n    rootClass: themeContext.className\n  })));\n}\n\nconst LevaCore = React.memo(_ref32 => {\n  let {\n    store,\n    rootClass,\n    fill: _fill = false,\n    flat: _flat = false,\n    neverHide: _neverHide = false,\n    oneLineLabels: _oneLineLabels = false,\n    titleBar: _titleBar = {\n      title: undefined,\n      drag: true,\n      filter: true,\n      position: undefined,\n      onDrag: undefined,\n      onDragStart: undefined,\n      onDragEnd: undefined\n    },\n    hideCopyButton: _hideCopyButton = false,\n    toggled,\n    setToggle\n  } = _ref32;\n\n  var _titleBar$drag, _titleBar$filter;\n\n  const paths = useVisiblePaths(store);\n  const [filter, setFilter] = useState('');\n  const tree = useMemo(() => buildTree(paths, filter), [paths, filter]);\n  const [rootRef, set] = useTransform();\n  const shouldShow = _neverHide || paths.length > 0;\n  const title = typeof _titleBar === 'object' ? _titleBar.title || undefined : undefined;\n  const drag = typeof _titleBar === 'object' ? (_titleBar$drag = _titleBar.drag) !== null && _titleBar$drag !== void 0 ? _titleBar$drag : true : true;\n  const filterEnabled = typeof _titleBar === 'object' ? (_titleBar$filter = _titleBar.filter) !== null && _titleBar$filter !== void 0 ? _titleBar$filter : true : true;\n  const position = typeof _titleBar === 'object' ? _titleBar.position || undefined : undefined;\n  const onDrag = typeof _titleBar === 'object' ? _titleBar.onDrag || undefined : undefined;\n  const onDragStart = typeof _titleBar === 'object' ? _titleBar.onDragStart || undefined : undefined;\n  const onDragEnd = typeof _titleBar === 'object' ? _titleBar.onDragEnd || undefined : undefined;\n  React.useEffect(() => {\n    set({\n      x: position === null || position === void 0 ? void 0 : position.x,\n      y: position === null || position === void 0 ? void 0 : position.y\n    });\n  }, [position, set]);\n  globalStyles();\n  return React.createElement(PanelSettingsContext.Provider, {\n    value: {\n      hideCopyButton: _hideCopyButton\n    }\n  }, React.createElement(StyledRoot, {\n    ref: rootRef,\n    className: rootClass,\n    fill: _fill,\n    flat: _flat,\n    oneLineLabels: _oneLineLabels,\n    hideTitleBar: !_titleBar,\n    style: {\n      display: shouldShow ? 'block' : 'none'\n    }\n  }, _titleBar && React.createElement(TitleWithFilter, {\n    onDrag: point => {\n      set(point);\n      onDrag === null || onDrag === void 0 ? void 0 : onDrag(point);\n    },\n    onDragStart: point => onDragStart === null || onDragStart === void 0 ? void 0 : onDragStart(point),\n    onDragEnd: point => onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd(point),\n    setFilter: setFilter,\n    toggle: flag => setToggle(t => flag !== null && flag !== void 0 ? flag : !t),\n    toggled: toggled,\n    title: title,\n    drag: drag,\n    filterEnabled: filterEnabled,\n    from: position\n  }), shouldShow && React.createElement(StoreContext.Provider, {\n    value: store\n  }, React.createElement(TreeWrapper, {\n    isRoot: true,\n    fill: _fill,\n    flat: _flat,\n    tree: tree,\n    toggled: toggled\n  }))));\n});\nconst _excluded$1 = [\"isRoot\"];\nlet rootInitialized = false;\nlet rootEl = null;\n\nfunction Leva(_ref) {\n  let {\n    isRoot = false\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded$1);\n\n  useEffect(() => {\n    rootInitialized = true;\n\n    if (!isRoot && rootEl) {\n      rootEl.remove();\n      rootEl = null;\n    }\n\n    return () => {\n      if (!isRoot) rootInitialized = false;\n    };\n  }, [isRoot]);\n  return React.createElement(LevaRoot, _extends({\n    store: levaStore\n  }, props));\n}\n\nfunction useRenderRoot(isGlobalPanel) {\n  useEffect(() => {\n    if (isGlobalPanel && !rootInitialized) {\n      if (!rootEl) {\n        rootEl = document.getElementById('leva__root') || Object.assign(document.createElement('div'), {\n          id: 'leva__root'\n        });\n\n        if (document.body) {\n          document.body.appendChild(rootEl);\n          render(React.createElement(Leva, {\n            isRoot: true\n          }), rootEl);\n        }\n      }\n\n      rootInitialized = true;\n    }\n  }, [isGlobalPanel]);\n}\n\nconst _excluded = [\"store\"];\n\nfunction LevaPanel(_ref) {\n  let {\n    store\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  const parentStore = useStoreContext();\n\n  const _store = store === undefined ? parentStore : store;\n\n  return React.createElement(LevaRoot, _extends({\n    store: _store\n  }, props));\n}\n\nfunction parseArgs(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined) {\n  let schema;\n  let folderName = undefined;\n  let folderSettings;\n  let hookSettings;\n  let deps;\n\n  if (typeof schemaOrFolderName === 'string') {\n    folderName = schemaOrFolderName;\n    schema = settingsOrDepsOrSchema;\n\n    if (Array.isArray(depsOrSettingsOrFolderSettings)) {\n      deps = depsOrSettingsOrFolderSettings;\n    } else {\n      if (depsOrSettingsOrFolderSettings) {\n        if ('store' in depsOrSettingsOrFolderSettings) {\n          hookSettings = depsOrSettingsOrFolderSettings;\n          deps = depsOrSettings;\n        } else {\n          folderSettings = depsOrSettingsOrFolderSettings;\n\n          if (Array.isArray(depsOrSettings)) {\n            deps = depsOrSettings;\n          } else {\n            hookSettings = depsOrSettings;\n            deps = depsOrUndefined;\n          }\n        }\n      }\n    }\n  } else {\n    schema = schemaOrFolderName;\n\n    if (Array.isArray(settingsOrDepsOrSchema)) {\n      deps = settingsOrDepsOrSchema;\n    } else {\n      hookSettings = settingsOrDepsOrSchema;\n      deps = depsOrSettingsOrFolderSettings;\n    }\n  }\n\n  return {\n    schema,\n    folderName,\n    folderSettings,\n    hookSettings,\n    deps: deps || []\n  };\n}\n\nfunction useControls(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined) {\n  const {\n    folderName,\n    schema,\n    folderSettings,\n    hookSettings,\n    deps\n  } = parseArgs(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined);\n  const schemaIsFunction = typeof schema === 'function';\n  const depsChanged = useRef(false);\n  const firstRender = useRef(true);\n\n  const _schema = useDeepMemo(() => {\n    depsChanged.current = true;\n    const s = typeof schema === 'function' ? schema() : schema;\n    return folderName ? {\n      [folderName]: folder(s, folderSettings)\n    } : s;\n  }, deps);\n\n  const isGlobalPanel = !(hookSettings !== null && hookSettings !== void 0 && hookSettings.store);\n  useRenderRoot(isGlobalPanel);\n  const [store] = useState(() => (hookSettings === null || hookSettings === void 0 ? void 0 : hookSettings.store) || levaStore);\n  const [initialData, mappedPaths] = useMemo(() => store.getDataFromSchema(_schema), [store, _schema]);\n  const [allPaths, renderPaths, onChangePaths, onEditStartPaths, onEditEndPaths] = useMemo(() => {\n    const allPaths = [];\n    const renderPaths = [];\n    const onChangePaths = {};\n    const onEditStartPaths = {};\n    const onEditEndPaths = {};\n    Object.values(mappedPaths).forEach(_ref33 => {\n      let {\n        path,\n        onChange,\n        onEditStart,\n        onEditEnd,\n        transient\n      } = _ref33;\n      allPaths.push(path);\n\n      if (!!onChange) {\n        onChangePaths[path] = onChange;\n\n        if (!transient) {\n          renderPaths.push(path);\n        }\n      } else {\n        renderPaths.push(path);\n      }\n\n      if (onEditStart) {\n        onEditStartPaths[path] = onEditStart;\n      }\n\n      if (onEditEnd) {\n        onEditEndPaths[path] = onEditEnd;\n      }\n    });\n    return [allPaths, renderPaths, onChangePaths, onEditStartPaths, onEditEndPaths];\n  }, [mappedPaths]);\n  const paths = useMemo(() => store.orderPaths(allPaths), [allPaths, store]);\n  const values = useValuesForPath(store, renderPaths, initialData);\n  const set = useCallback(values => {\n    const _values = Object.entries(values).reduce((acc, _ref34) => {\n      let [p, v] = _ref34;\n      return Object.assign(acc, {\n        [mappedPaths[p].path]: v\n      });\n    }, {});\n\n    store.set(_values, false);\n  }, [store, mappedPaths]);\n  const get = useCallback(path => store.get(mappedPaths[path].path), [store, mappedPaths]);\n  useEffect(() => {\n    const shouldOverrideSettings = !firstRender.current && depsChanged.current;\n    store.addData(initialData, shouldOverrideSettings);\n    firstRender.current = false;\n    depsChanged.current = false;\n    return () => store.disposePaths(paths);\n  }, [store, paths, initialData]);\n  useEffect(() => {\n    const unsubscriptions = [];\n    Object.entries(onChangePaths).forEach(_ref35 => {\n      let [path, onChange] = _ref35;\n      onChange(store.get(path), path, _objectSpread2({\n        initial: true,\n        get: store.get\n      }, store.getInput(path)));\n      const unsub = store.useStore.subscribe(s => {\n        const input = s.data[path];\n        const value = input.disabled ? undefined : input.value;\n        return [value, input];\n      }, _ref36 => {\n        let [value, input] = _ref36;\n        return onChange(value, path, _objectSpread2({\n          initial: false,\n          get: store.get\n        }, input));\n      }, {\n        equalityFn: shallow\n      });\n      unsubscriptions.push(unsub);\n    });\n    return () => unsubscriptions.forEach(unsub => unsub());\n  }, [store, onChangePaths]);\n  useEffect(() => {\n    const unsubscriptions = [];\n    Object.entries(onEditStartPaths).forEach(_ref37 => {\n      let [path, onEditStart] = _ref37;\n      return unsubscriptions.push(store.subscribeToEditStart(path, onEditStart));\n    });\n    Object.entries(onEditEndPaths).forEach(_ref38 => {\n      let [path, onEditEnd] = _ref38;\n      return unsubscriptions.push(store.subscribeToEditEnd(path, onEditEnd));\n    });\n    return () => unsubscriptions.forEach(unsub => unsub());\n  }, [onEditStartPaths, onEditEndPaths, store]);\n  if (schemaIsFunction) return [values, set, get];\n  return values;\n}\n\nregister(LevaInputs.SELECT, select);\nregister(LevaInputs.IMAGE, image);\nregister(LevaInputs.NUMBER, number$1);\nregister(LevaInputs.COLOR, color);\nregister(LevaInputs.STRING, string);\nregister(LevaInputs.BOOLEAN, boolean);\nregister(LevaInputs.INTERVAL, interval);\nregister(LevaInputs.VECTOR3D, vector3d);\nregister(LevaInputs.VECTOR2D, vector2d);\nexport { Leva, LevaPanel, button, buttonGroup, folder, levaStore, monitor, useControls, useCreateStore };","map":{"version":3,"names":["p","pick","_","_objectSpread2","o","omit","s","styled","u","useInputContext","R","Row","L","Label","V","ValueInput","P","Portal","O","Overlay","c","createInternalPlugin","a","Vector","g","getVectorPlugin","b","useTransform","d","useTh","e","useDrag","f","_extends","m","multiplyStep","h","clamp","i","_objectWithoutProperties","n","normalizeKeyedNumberSettings","j","invertedRange","k","sanitizeStep","r","range","l","RangeWrapper","q","Range","I","Indicator","S","Scrubber","t","getUid","v","SpecialInputs","w","warn","x","LevaErrors","y","updateInput","z","normalizeInput","A","useInputSetters","B","Plugins","C","InputContext","D","StyledInputWrapper","E","useStoreContext","F","useCanvas2d","G","useInput","H","log","J","StyledTitle","K","Chevron","M","StyledWrapper","N","StyledContent","Q","StyledFolder","T","StyledInputRow","U","debounce","W","globalStyles","X","PanelSettingsContext","Y","StoreContext","Z","mergeTheme","$","ThemeContext","a0","render","a1","register","a2","LevaInputs","a3","select","a4","number$1","a5","string","a6","boolean","a7","LevaStoreProvider","v8n","extend","colord","getFormat","namesPlugin","dequal","React","useRef","useMemo","useLayoutEffect","useEffect","useState","useCallback","forwardRef","useImperativeHandle","RgbaColorPicker","RgbColorPicker","shallow","useDropzone","create","subscribeWithSelector","merge","join","args","filter","Boolean","getKeyPath","path","dir","split","pop","undefined","getValuesForPaths","data","paths","Object","entries","reduce","acc","value","disabled","key","useCompareMemoize","deep","ref","compare","current","useDeepMemo","fn","deps","useToggle","toggled","wrapperRef","contentRef","firstRender","style","height","overflow","timeout","fixHeight","removeProperty","scrollIntoView","behavior","block","addEventListener","once","getBoundingClientRect","window","setTimeout","removeEventListener","clearTimeout","useVisiblePaths","store","setPaths","getVisiblePaths","unsub","useStore","subscribe","equalityFn","useValuesForPath","initialData","valuesForPath","usePopin","margin","popinRef","shown","setShow","show","hide","bottom","top","left","direction","innerHeight","position","zIndex","convertMap","rgb","hsl","hsv","hex","color","isValid","schema$2","test","convert","format","hasAlpha","isString","convertFn","result","sanitize$2","settings","Error","format$1","normalize$3","_f","length","props$2","freeze","__proto__","schema","sanitize","normalize","ColorPreview","boxSizing","borderRadius","cursor","width","backgroundColor","backgroundImage","$inputStyle","$hover","variants","active","true","content","right","PickerContainer","display","gridTemplateColumns","columnGap","alignItems","PickerWrapper","boxShadow","convertToRgb","toRgb","Color","displayValue","onUpdate","emitOnEditStart","emitOnEditEnd","timer","initialRgb","setInitialRgb","ColorPicker","showPicker","hidePicker","hideAfterDelay","createElement","Fragment","onClick","onPointerUp","onMouseEnter","onMouseLeave","buttons","onChange","ColorComponent","label","input","component","Vector3dComponent","vector3d","JoystickTrigger","$flexCenter","touchAction","$draggable","JoystickPlayground","transform","isOutOfBounds","false","borderStyle","borderWidth","borderColor","zindex","Joystick","outOfBoundsX","outOfBoundsY","stepMultiplier","joystickShown","setShowJoystick","setIsOutOfBounds","spanRef","set","joystickeRef","playgroundRef","keys","v1","v2","joystick","yFactor","step","stepV1","stepV2","wpx","hpx","parseFloat","startOutOfBounds","setInterval","incX","incY","Array","isArray","endOutOfBounds","setStepMultiplier","event","bind","first","delta","dx","dy","movement","mx","my","_x","_y","Math","abs","sign","newX","newY","Container$1","withJoystick","Vector2dComponent","_excluded$7","plugin","normalize$2","_ref","vector2d","sanitize$1","File","URL","createObjectURL","indexOf","schema$1","_o","normalize$1","image","props$1","ImageContainer","DropZone","background","textAlign","outline","userSelect","$focusWithin","$active","isDragAccept","ImagePreview","backgroundSize","backgroundPosition","hasImage","ImageLargePreview","pointerEvents","Instructions","fontSize","padding","Remove","marginRight","ImageComponent","onDrop","acceptedFiles","clear","stopPropagation","getRootProps","getInputProps","maxFiles","accept","onPointerDown","number","array","every","min","max","prevValue","bounds","MIN","MAX","_value","_newValue","Number","boundsSettings","_settings","props","_excluded$6","_excluded2$1","Container","IntervalSlider","onDrag","minScrubberRef","maxScrubberRef","rangeWidth","scrubberWidth","xy","memo","_memo","targetIsScrub","target","pos","newValue","minStyle","maxStyle","IntervalComponent","innerLabelTrim","interval","createEventEmitter","listenerMapping","Map","on","topic","listener","listeners","get","Set","add","off","delete","size","emit","_excluded$5","_excluded2","Store","eventEmitter","storeId","folders","orderedPaths","getData","hiddenFolders","forEach","some","push","visiblePaths","__refCount","setOrderedPaths","newPaths","orderPaths","disposePaths","setState","type","dispose","getFolderSettings","getState","addData","newData","override","newInputData","rest","INPUT_TYPE_OVERRIDE","assign","setValueAtPath","fromPanel","setSettingsAtPath","disableInputAtPath","flag","values","process","env","NODE_ENV","console","getInput","PATH_DOESNT_EXIST","_this$getInput","subscribeToEditStart","_path","subscribeToEditEnd","_getDataFromSchema","rootPath","mappedPaths","rawInput","EMPTY_KEY","newPath","FOLDER","DUPLICATE_KEYS","normalizedInput","options","transient","onEditStart","onEditEnd","_options","UNKNOWN_INPUT","getDataFromSchema","levaStore","useCreateStore","__STORE","defaultSettings$2","collapsed","folder","defaultSettings$1","button","BUTTON","buttonGroup","opts","BUTTON_GROUP","defaultSettings","graph","monitor","objectOrFn","MONITOR","isInput","buildTree","tree","_filter","toLowerCase","valueKey","folderPath","__levaInput","_excluded$4","ControlInput","setValue","Input","NO_COMPONENT_FOR_TYPE","Provider","id","StyledButton","$reset","fontWeight","$focus","Button","StyledButtonGroup","$flex","justifyContent","gap","StyledButtonGroupButton","getOpts","_label","_opts","trim","ButtonGroup","map","Canvas","POINTS","arr","val","shift","MonitorCanvas","initialValue","accentColor","fillColor","gradientTop","gradientBottom","alpha","toRgbString","points","raf","drawPlot","_canvas","_ctx","Path2D","verticalPadding","lineTo","clearRect","gradientPath","gradient","createLinearGradient","addColorStop","fillStyle","fill","strokeStyle","lineJoin","lineWidth","stroke","canvas","ctx","frame","requestAnimationFrame","cancelAnimationFrame","parse","isFinite","toPrecision","toString","MonitorLog","getValue","Monitor","_ref$current","document","hidden","clearInterval","align","_excluded$3","specialComponents","Control","setSettings","disable","inputProps","SpecialInputForType","UNSUPPORTED_INPUT","FolderTitle","toggle","name","Folder","setToggle","folderRef","widgetColor","textColor","setProperty","TreeWrapper","parent","isRoot","_isRoot","_fill","flat","_flat","getOrder","_store$getInput","order","sort","StyledRoot","fontFamily","oneLineLabels","gridAutoColumns","gridAutoRows","rowGap","marginTop","hideTitleBar","$$titleBarHeight","iconWidth","Icon","transition","StyledTitleWithFilter","mode","drag","FilterWrapper","paddingLeft","StyledFilterInput","flex","TitleContainer","filterEnabled","paddingRight","FilterInput","setFilter","debouncedOnChange","_onChange","currentTarget","placeholder","visibility","xmlns","viewBox","fillRule","clipRule","TitleWithFilter","onDragStart","onDragEnd","title","from","filterShown","setShowFilter","inputRef","_inputRef$current","_inputRef$current2","focus","blur","offset","last","filterTaps","handleShortcut","shiftKey","metaKey","cx","cy","_excluded$2","LevaRoot","theme","themeContext","computedToggled","computedSetToggle","LevaCore","rootClass","className","neverHide","_neverHide","_oneLineLabels","titleBar","_titleBar","hideCopyButton","_hideCopyButton","_titleBar$drag","_titleBar$filter","rootRef","shouldShow","point","_excluded$1","rootInitialized","rootEl","Leva","remove","useRenderRoot","isGlobalPanel","getElementById","body","appendChild","_excluded","LevaPanel","parentStore","_store","parseArgs","schemaOrFolderName","settingsOrDepsOrSchema","depsOrSettingsOrFolderSettings","depsOrSettings","depsOrUndefined","folderName","folderSettings","hookSettings","useControls","schemaIsFunction","depsChanged","_schema","allPaths","renderPaths","onChangePaths","onEditStartPaths","onEditEndPaths","_values","shouldOverrideSettings","unsubscriptions","initial","SELECT","IMAGE","NUMBER","COLOR","STRING","BOOLEAN","INTERVAL","VECTOR3D","VECTOR2D"],"sources":["/Users/erachlin/pandemicProject/node_modules/leva/dist/leva.esm.js"],"sourcesContent":["import { p as pick, _ as _objectSpread2, o as omit, s as styled, u as useInputContext, R as Row, L as Label, V as ValueInput, P as Portal, O as Overlay, c as createInternalPlugin, a as Vector, g as getVectorPlugin, b as useTransform, d as useTh, e as useDrag, f as _extends, m as multiplyStep, h as clamp, i as _objectWithoutProperties, n as normalizeKeyedNumberSettings, j as invertedRange, k as sanitizeStep, r as range, l as RangeWrapper, q as Range, I as Indicator, S as Scrubber, t as getUid, v as SpecialInputs, w as warn, x as LevaErrors, y as updateInput, z as normalizeInput, A as useInputSetters, B as Plugins, C as InputContext, D as StyledInputWrapper, E as useStoreContext, F as useCanvas2d, G as useInput, H as log, J as StyledTitle, K as Chevron, M as StyledWrapper, N as StyledContent, Q as StyledFolder, T as StyledInputRow, U as debounce, W as globalStyles, X as PanelSettingsContext, Y as StoreContext, Z as mergeTheme, $ as ThemeContext, a0 as render, a1 as register, a2 as LevaInputs, a3 as select, a4 as number$1, a5 as string, a6 as boolean } from './vector-plugin-6f82aee9.esm.js';\nexport { a2 as LevaInputs, a7 as LevaStoreProvider, E as useStoreContext } from './vector-plugin-6f82aee9.esm.js';\nimport v8n from 'v8n';\nimport { extend, colord, getFormat } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\nimport { dequal } from 'dequal/lite';\nimport 'react-dom';\nimport React, { useRef, useMemo, useLayoutEffect, useEffect, useState, useCallback, forwardRef, useImperativeHandle } from 'react';\nimport { RgbaColorPicker, RgbColorPicker } from 'react-colorful';\nimport shallow from 'zustand/shallow';\nimport '@use-gesture/react';\nimport '@radix-ui/react-portal';\nimport '@radix-ui/react-tooltip';\nimport { useDropzone } from 'react-dropzone';\nimport create from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\nimport merge from 'merge-value';\nimport '@stitches/react';\n\nconst join = (...args) => args.filter(Boolean).join('.');\nfunction getKeyPath(path) {\n  const dir = path.split('.');\n  return [dir.pop(), dir.join('.') || undefined];\n}\n\nfunction getValuesForPaths(data, paths) {\n  return Object.entries(pick(data, paths)).reduce(\n\n  (acc, [, {\n    value,\n    disabled,\n    key\n  }]) => {\n    acc[key] = disabled ? undefined : value;\n    return acc;\n  }, {});\n}\n\nfunction useCompareMemoize(value, deep) {\n  const ref = useRef();\n  const compare = deep ? dequal : shallow;\n  if (!compare(value, ref.current)) {\n    ref.current = value;\n  }\n  return ref.current;\n}\n\nfunction useDeepMemo(fn, deps) {\n  return useMemo(fn, useCompareMemoize(deps, true));\n}\n\nfunction useToggle(toggled) {\n  const wrapperRef = useRef(null);\n  const contentRef = useRef(null);\n  const firstRender = useRef(true);\n\n  useLayoutEffect(() => {\n    if (!toggled) {\n      wrapperRef.current.style.height = '0px';\n      wrapperRef.current.style.overflow = 'hidden';\n    }\n  }, []);\n  useEffect(() => {\n    if (firstRender.current) {\n      firstRender.current = false;\n      return;\n    }\n    let timeout;\n    const ref = wrapperRef.current;\n    const fixHeight = () => {\n      if (toggled) {\n        ref.style.removeProperty('height');\n        ref.style.removeProperty('overflow');\n        contentRef.current.scrollIntoView({\n          behavior: 'smooth',\n          block: 'nearest'\n        });\n      }\n    };\n    ref.addEventListener('transitionend', fixHeight, {\n      once: true\n    });\n    const {\n      height\n    } = contentRef.current.getBoundingClientRect();\n    ref.style.height = height + 'px';\n    if (!toggled) {\n      ref.style.overflow = 'hidden';\n      timeout = window.setTimeout(() => ref.style.height = '0px', 50);\n    }\n    return () => {\n      ref.removeEventListener('transitionend', fixHeight);\n      clearTimeout(timeout);\n    };\n  }, [toggled]);\n  return {\n    wrapperRef,\n    contentRef\n  };\n}\n\nconst useVisiblePaths = store => {\n  const [paths, setPaths] = useState(store.getVisiblePaths());\n  useEffect(() => {\n    setPaths(store.getVisiblePaths());\n    const unsub = store.useStore.subscribe(store.getVisiblePaths, setPaths, {\n      equalityFn: shallow\n    });\n    return () => unsub();\n  }, [store]);\n  return paths;\n};\n\nfunction useValuesForPath(store, paths, initialData) {\n  const valuesForPath = store.useStore(s => {\n    const data = _objectSpread2(_objectSpread2({}, initialData), s.data);\n    return getValuesForPaths(data, paths);\n  }, shallow);\n  return valuesForPath;\n}\n\nfunction usePopin(margin = 3) {\n  const popinRef = useRef(null);\n  const wrapperRef = useRef(null);\n  const [shown, setShow] = useState(false);\n  const show = useCallback(() => setShow(true), []);\n  const hide = useCallback(() => setShow(false), []);\n  useLayoutEffect(() => {\n    if (shown) {\n      const {\n        bottom,\n        top,\n        left\n      } = popinRef.current.getBoundingClientRect();\n      const {\n        height\n      } = wrapperRef.current.getBoundingClientRect();\n      const direction = bottom + height > window.innerHeight - 40 ? 'up' : 'down';\n      wrapperRef.current.style.position = 'fixed';\n      wrapperRef.current.style.zIndex = '10000';\n      wrapperRef.current.style.left = left + 'px';\n      if (direction === 'down') wrapperRef.current.style.top = bottom + margin + 'px';else wrapperRef.current.style.bottom = window.innerHeight - top + margin + 'px';\n    }\n  }, [margin, shown]);\n  return {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  };\n}\n\nextend([namesPlugin]);\nconst convertMap = {\n  rgb: 'toRgb',\n  hsl: 'toHsl',\n  hsv: 'toHsv',\n  hex: 'toHex'\n};\nv8n.extend({\n  color: () => value => colord(value).isValid()\n});\nconst schema$2 = o => v8n().color().test(o);\nfunction convert(color, {\n  format,\n  hasAlpha,\n  isString\n}) {\n  const convertFn = convertMap[format] + (isString && format !== 'hex' ? 'String' : '');\n  const result = color[convertFn]();\n  return typeof result === 'object' && !hasAlpha ? omit(result, ['a']) : result;\n}\nconst sanitize$2 = (v, settings) => {\n  const color = colord(v);\n  if (!color.isValid()) throw Error('Invalid color');\n  return convert(color, settings);\n};\nconst format$1 = (v, settings) => {\n  return convert(colord(v), _objectSpread2(_objectSpread2({}, settings), {}, {\n    isString: true,\n    format: 'hex'\n  }));\n};\nconst normalize$3 = ({\n  value\n}) => {\n  const _f = getFormat(value);\n  const format = _f === 'name' ? 'hex' : _f;\n  const hasAlpha = typeof value === 'object' ? 'a' in value : _f === 'hex' && value.length === 8 || /^(rgba)|(hsla)|(hsva)/.test(value);\n  const settings = {\n    format,\n    hasAlpha,\n    isString: typeof value === 'string'\n  };\n\n  return {\n    value: sanitize$2(value, settings),\n    settings\n  };\n};\n\nvar props$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schema: schema$2,\n  sanitize: sanitize$2,\n  format: format$1,\n  normalize: normalize$3\n});\n\nconst ColorPreview = styled('div', {\n  position: 'relative',\n  boxSizing: 'border-box',\n  borderRadius: '$sm',\n  overflow: 'hidden',\n  cursor: 'pointer',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  backgroundColor: '#fff',\n  backgroundImage: `url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill-opacity=\".05\"><path d=\"M8 0h8v8H8zM0 8h8v8H0z\"/></svg>')`,\n  $inputStyle: '',\n  $hover: '',\n  zIndex: 1,\n  variants: {\n    active: {\n      true: {\n        $inputStyle: '$accent1'\n      }\n    }\n  },\n  '&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    right: 0,\n    left: 0,\n    backgroundColor: 'currentColor',\n    zIndex: 1\n  }\n});\nconst PickerContainer = styled('div', {\n  position: 'relative',\n  display: 'grid',\n  gridTemplateColumns: '$sizes$rowHeight auto',\n  columnGap: '$colGap',\n  alignItems: 'center'\n});\nconst PickerWrapper = styled('div', {\n  width: '$colorPickerWidth',\n  height: '$colorPickerHeight',\n  '.react-colorful': {\n    width: '100%',\n    height: '100%',\n    boxShadow: '$level2',\n    cursor: 'crosshair'\n  },\n  '.react-colorful__saturation': {\n    borderRadius: '$sm $sm 0 0'\n  },\n  '.react-colorful__alpha, .react-colorful__hue': {\n    height: 10\n  },\n  '.react-colorful__last-control': {\n    borderRadius: '0 0 $sm $sm'\n  },\n  '.react-colorful__pointer': {\n    height: 12,\n    width: 12\n  }\n});\n\nfunction convertToRgb(value, format) {\n  return format !== 'rgb' ? colord(value).toRgb() : value;\n}\nfunction Color({\n  value,\n  displayValue,\n  settings,\n  onUpdate\n}) {\n  const {\n    emitOnEditStart,\n    emitOnEditEnd\n  } = useInputContext();\n  const {\n    format,\n    hasAlpha\n  } = settings;\n  const {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  } = usePopin();\n\n  const timer = useRef(0);\n\n  const [initialRgb, setInitialRgb] = useState(() => convertToRgb(value, format));\n  const ColorPicker = hasAlpha ? RgbaColorPicker : RgbColorPicker;\n  const showPicker = () => {\n    setInitialRgb(convertToRgb(value, format));\n    show();\n    emitOnEditStart();\n  };\n  const hidePicker = () => {\n    hide();\n    emitOnEditEnd();\n    window.clearTimeout(timer.current);\n  };\n  const hideAfterDelay = () => {\n    timer.current = window.setTimeout(hidePicker, 500);\n  };\n  useEffect(() => {\n    return () => window.clearTimeout(timer.current);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(ColorPreview, {\n    ref: popinRef,\n    active: shown,\n    onClick: () => showPicker(),\n    style: {\n      color: displayValue\n    }\n  }), shown && React.createElement(Portal, null, React.createElement(Overlay, {\n    onPointerUp: hidePicker\n  }), React.createElement(PickerWrapper, {\n    ref: wrapperRef,\n    onMouseEnter: () => window.clearTimeout(timer.current),\n    onMouseLeave: e => e.buttons === 0 && hideAfterDelay()\n  }, React.createElement(ColorPicker, {\n    color: initialRgb,\n    onChange: onUpdate\n  }))));\n}\nfunction ColorComponent() {\n  const {\n    value,\n    displayValue,\n    label,\n    onChange,\n    onUpdate,\n    settings\n  } = useInputContext();\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(PickerContainer, null, React.createElement(Color, {\n    value: value,\n    displayValue: displayValue,\n    onChange: onChange,\n    onUpdate: onUpdate,\n    settings: settings\n  }), React.createElement(ValueInput, {\n    value: displayValue,\n    onChange: onChange,\n    onUpdate: onUpdate\n  })));\n}\n\nvar color = createInternalPlugin(_objectSpread2({\n  component: ColorComponent\n}, props$2));\n\nfunction Vector3dComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = useInputContext();\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(Vector, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  }));\n}\n\nvar vector3d = createInternalPlugin(_objectSpread2({\n  component: Vector3dComponent\n}, getVectorPlugin(['x', 'y', 'z'])));\n\nconst JoystickTrigger = styled('div', {\n  $flexCenter: '',\n  position: 'relative',\n  backgroundColor: '$elevation3',\n  borderRadius: '$sm',\n  cursor: 'pointer',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  touchAction: 'none',\n  $draggable: '',\n  $hover: '',\n  '&:active': {\n    cursor: 'none'\n  },\n  '&::after': {\n    content: '\"\"',\n    backgroundColor: '$accent2',\n    height: 4,\n    width: 4,\n    borderRadius: 2\n  }\n});\nconst JoystickPlayground = styled('div', {\n  $flexCenter: '',\n  width: '$joystickWidth',\n  height: '$joystickHeight',\n  borderRadius: '$sm',\n  boxShadow: '$level2',\n  position: 'fixed',\n  zIndex: 10000,\n  overflow: 'hidden',\n  $draggable: '',\n  transform: 'translate(-50%, -50%)',\n  variants: {\n    isOutOfBounds: {\n      true: {\n        backgroundColor: '$elevation1'\n      },\n      false: {\n        backgroundColor: '$elevation3'\n      }\n    }\n  },\n  '> div': {\n    position: 'absolute',\n    $flexCenter: '',\n    borderStyle: 'solid',\n    borderWidth: 1,\n    borderColor: '$highlight1',\n    backgroundColor: '$elevation3',\n    width: '80%',\n    height: '80%',\n    '&::after,&::before': {\n      content: '\"\"',\n      position: 'absolute',\n      zindex: 10,\n      backgroundColor: '$highlight1'\n    },\n    '&::before': {\n      width: '100%',\n      height: 1\n    },\n    '&::after': {\n      height: '100%',\n      width: 1\n    }\n  },\n  '> span': {\n    position: 'relative',\n    zindex: 100,\n    width: 10,\n    height: 10,\n    backgroundColor: '$accent2',\n    borderRadius: '50%'\n  }\n});\n\nfunction Joystick({\n  value,\n  settings,\n  onUpdate\n}) {\n  const timeout = useRef();\n  const outOfBoundsX = useRef(0);\n  const outOfBoundsY = useRef(0);\n  const stepMultiplier = useRef(1);\n  const [joystickShown, setShowJoystick] = useState(false);\n  const [isOutOfBounds, setIsOutOfBounds] = useState(false);\n  const [spanRef, set] = useTransform();\n  const joystickeRef = useRef(null);\n  const playgroundRef = useRef(null);\n  useLayoutEffect(() => {\n    if (joystickShown) {\n      const {\n        top,\n        left,\n        width,\n        height\n      } = joystickeRef.current.getBoundingClientRect();\n      playgroundRef.current.style.left = left + width / 2 + 'px';\n      playgroundRef.current.style.top = top + height / 2 + 'px';\n    }\n  }, [joystickShown]);\n  const {\n    keys: [v1, v2],\n    joystick\n  } = settings;\n  const yFactor = joystick === 'invertY' ? 1 : -1;\n  const {\n    [v1]: {\n      step: stepV1\n    },\n    [v2]: {\n      step: stepV2\n    }\n  } = settings;\n  const wpx = useTh('sizes', 'joystickWidth');\n  const hpx = useTh('sizes', 'joystickHeight');\n  const w = parseFloat(wpx) * 0.8 / 2;\n  const h = parseFloat(hpx) * 0.8 / 2;\n  const startOutOfBounds = useCallback(() => {\n    if (timeout.current) return;\n    setIsOutOfBounds(true);\n    if (outOfBoundsX.current) set({\n      x: outOfBoundsX.current * w\n    });\n    if (outOfBoundsY.current) set({\n      y: outOfBoundsY.current * -h\n    });\n    timeout.current = window.setInterval(() => {\n      onUpdate(v => {\n        const incX = stepV1 * outOfBoundsX.current * stepMultiplier.current;\n        const incY = yFactor * stepV2 * outOfBoundsY.current * stepMultiplier.current;\n        return Array.isArray(v) ? {\n          [v1]: v[0] + incX,\n          [v2]: v[1] + incY\n        } : {\n          [v1]: v[v1] + incX,\n          [v2]: v[v2] + incY\n        };\n      });\n    }, 16);\n  }, [w, h, onUpdate, set, stepV1, stepV2, v1, v2, yFactor]);\n  const endOutOfBounds = useCallback(() => {\n    window.clearTimeout(timeout.current);\n    timeout.current = undefined;\n    setIsOutOfBounds(false);\n  }, []);\n  useEffect(() => {\n    function setStepMultiplier(event) {\n      stepMultiplier.current = multiplyStep(event);\n    }\n    window.addEventListener('keydown', setStepMultiplier);\n    window.addEventListener('keyup', setStepMultiplier);\n    return () => {\n      window.clearTimeout(timeout.current);\n      window.removeEventListener('keydown', setStepMultiplier);\n      window.removeEventListener('keyup', setStepMultiplier);\n    };\n  }, []);\n  const bind = useDrag(({\n    first,\n    active,\n    delta: [dx, dy],\n    movement: [mx, my]\n  }) => {\n    if (first) setShowJoystick(true);\n    const _x = clamp(mx, -w, w);\n    const _y = clamp(my, -h, h);\n    outOfBoundsX.current = Math.abs(mx) > Math.abs(_x) ? Math.sign(mx - _x) : 0;\n    outOfBoundsY.current = Math.abs(my) > Math.abs(_y) ? Math.sign(_y - my) : 0;\n\n    let newX = value[v1];\n    let newY = value[v2];\n    if (active) {\n      if (!outOfBoundsX.current) {\n        newX += dx * stepV1 * stepMultiplier.current;\n        set({\n          x: _x\n        });\n      }\n      if (!outOfBoundsY.current) {\n        newY -= yFactor * dy * stepV2 * stepMultiplier.current;\n        set({\n          y: _y\n        });\n      }\n      if (outOfBoundsX.current || outOfBoundsY.current) startOutOfBounds();else endOutOfBounds();\n      onUpdate({\n        [v1]: newX,\n        [v2]: newY\n      });\n    } else {\n      setShowJoystick(false);\n      outOfBoundsX.current = 0;\n      outOfBoundsY.current = 0;\n      set({\n        x: 0,\n        y: 0\n      });\n      endOutOfBounds();\n    }\n  });\n  return React.createElement(JoystickTrigger, _extends({\n    ref: joystickeRef\n  }, bind()), joystickShown && React.createElement(Portal, null, React.createElement(JoystickPlayground, {\n    ref: playgroundRef,\n    isOutOfBounds: isOutOfBounds\n  }, React.createElement(\"div\", null), React.createElement(\"span\", {\n    ref: spanRef\n  }))));\n}\n\nconst Container$1 = styled('div', {\n  display: 'grid',\n  columnGap: '$colGap',\n  variants: {\n    withJoystick: {\n      true: {\n        gridTemplateColumns: '$sizes$rowHeight auto'\n      },\n      false: {\n        gridTemplateColumns: 'auto'\n      }\n    }\n  }\n});\nfunction Vector2dComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = useInputContext();\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(Container$1, {\n    withJoystick: !!settings.joystick\n  }, settings.joystick && React.createElement(Joystick, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  }), React.createElement(Vector, {\n    value: displayValue,\n    settings: settings,\n    onUpdate: onUpdate\n  })));\n}\n\nconst _excluded$7 = [\"joystick\"];\nconst plugin = getVectorPlugin(['x', 'y']);\nconst normalize$2 = _ref => {\n  let {\n      joystick = true\n    } = _ref,\n    input = _objectWithoutProperties(_ref, _excluded$7);\n  const {\n    value,\n    settings\n  } = plugin.normalize(input);\n  return {\n    value,\n    settings: _objectSpread2(_objectSpread2({}, settings), {}, {\n      joystick\n    })\n  };\n};\nvar vector2d = createInternalPlugin(_objectSpread2(_objectSpread2({\n  component: Vector2dComponent\n}, plugin), {}, {\n  normalize: normalize$2\n}));\n\nconst sanitize$1 = v => {\n  if (v === undefined) return undefined;\n  if (v instanceof File) {\n    try {\n      return URL.createObjectURL(v);\n    } catch (e) {\n      return undefined;\n    }\n  }\n  if (typeof v === 'string' && v.indexOf('blob:') === 0) return v;\n  throw Error(`Invalid image format [undefined | blob |Â File].`);\n};\nconst schema$1 = (_o, s) => typeof s === 'object' && 'image' in s;\nconst normalize$1 = ({\n  image\n}) => {\n  return {\n    value: image\n  };\n};\n\nvar props$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  sanitize: sanitize$1,\n  schema: schema$1,\n  normalize: normalize$1\n});\n\nconst ImageContainer = styled('div', {\n  position: 'relative',\n  display: 'grid',\n  gridTemplateColumns: '$sizes$rowHeight auto 20px',\n  columnGap: '$colGap',\n  alignItems: 'center'\n});\nconst DropZone = styled('div', {\n  $flexCenter: '',\n  overflow: 'hidden',\n  height: '$rowHeight',\n  background: '$elevation3',\n  textAlign: 'center',\n  color: 'inherit',\n  borderRadius: '$sm',\n  outline: 'none',\n  userSelect: 'none',\n  cursor: 'pointer',\n  $inputStyle: '',\n  $hover: '',\n  $focusWithin: '',\n  $active: '$accent1 $elevation1',\n  variants: {\n    isDragAccept: {\n      true: {\n        $inputStyle: '$accent1',\n        backgroundColor: '$elevation1'\n      }\n    }\n  }\n});\nconst ImagePreview = styled('div', {\n  boxSizing: 'border-box',\n  borderRadius: '$sm',\n  height: '$rowHeight',\n  width: '$rowHeight',\n  $inputStyle: '',\n  backgroundSize: 'cover',\n  backgroundPosition: 'center',\n  variants: {\n    hasImage: {\n      true: {\n        cursor: 'pointer',\n        $hover: '',\n        $active: ''\n      }\n    }\n  }\n});\nconst ImageLargePreview = styled('div', {\n  $flexCenter: '',\n  width: '$imagePreviewWidth',\n  height: '$imagePreviewHeight',\n  borderRadius: '$sm',\n  boxShadow: '$level2',\n  pointerEvents: 'none',\n  $inputStyle: '',\n  backgroundSize: 'cover',\n  backgroundPosition: 'center'\n});\nconst Instructions = styled('div', {\n  fontSize: '0.8em',\n  height: '100%',\n  padding: '$rowGap $md'\n});\nconst Remove = styled('div', {\n  $flexCenter: '',\n  top: '0',\n  right: '0',\n  marginRight: '$sm',\n  height: '100%',\n  cursor: 'pointer',\n  variants: {\n    disabled: {\n      true: {\n        color: '$elevation3',\n        cursor: 'default'\n      }\n    }\n  },\n  '&::after,&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    height: 2,\n    width: 10,\n    borderRadius: 1,\n    backgroundColor: 'currentColor'\n  },\n  '&::after': {\n    transform: 'rotate(45deg)'\n  },\n  '&::before': {\n    transform: 'rotate(-45deg)'\n  }\n});\n\nfunction ImageComponent() {\n  const {\n    label,\n    value,\n    onUpdate,\n    disabled\n  } = useInputContext();\n  const {\n    popinRef,\n    wrapperRef,\n    shown,\n    show,\n    hide\n  } = usePopin();\n  const onDrop = useCallback(acceptedFiles => {\n    if (acceptedFiles.length) onUpdate(acceptedFiles[0]);\n  }, [onUpdate]);\n  const clear = useCallback(e => {\n    e.stopPropagation();\n    onUpdate(undefined);\n  }, [onUpdate]);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragAccept\n  } = useDropzone({\n    maxFiles: 1,\n    accept: 'image/*',\n    onDrop,\n    disabled\n  });\n\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(ImageContainer, null, React.createElement(ImagePreview, {\n    ref: popinRef,\n    hasImage: !!value,\n    onPointerDown: () => !!value && show(),\n    onPointerUp: hide,\n    style: {\n      backgroundImage: value ? `url(${value})` : 'none'\n    }\n  }), shown && !!value && React.createElement(Portal, null, React.createElement(Overlay, {\n    onPointerUp: hide,\n    style: {\n      cursor: 'pointer'\n    }\n  }), React.createElement(ImageLargePreview, {\n    ref: wrapperRef,\n    style: {\n      backgroundImage: `url(${value})`\n    }\n  })), React.createElement(DropZone, getRootProps({\n    isDragAccept\n  }), React.createElement(\"input\", getInputProps()), React.createElement(Instructions, null, isDragAccept ? 'drop image' : 'click or drop')), React.createElement(Remove, {\n    onClick: clear,\n    disabled: !value\n  })));\n}\n\nvar image = createInternalPlugin(_objectSpread2({\n  component: ImageComponent\n}, props$1));\n\nconst number = v8n().number();\nconst schema = (o, s) => v8n().array().length(2).every.number().test(o) && v8n().schema({\n  min: number,\n  max: number\n}).test(s);\nconst format = v => ({\n  min: v[0],\n  max: v[1]\n});\nconst sanitize = (value, {\n  bounds: [MIN, MAX]\n}, prevValue) => {\n  const _value = Array.isArray(value) ? format(value) : value;\n  const _newValue = {\n    min: prevValue[0],\n    max: prevValue[1]\n  };\n  const {\n    min,\n    max\n  } = _objectSpread2(_objectSpread2({}, _newValue), _value);\n  return [clamp(Number(min), MIN, Math.max(MIN, max)), clamp(Number(max), Math.min(MAX, min), MAX)];\n};\nconst normalize = ({\n  value,\n  min,\n  max\n}) => {\n  const boundsSettings = {\n    min,\n    max\n  };\n  const _settings = normalizeKeyedNumberSettings(format(value), {\n    min: boundsSettings,\n    max: boundsSettings\n  });\n  const bounds = [min, max];\n  const settings = _objectSpread2(_objectSpread2({}, _settings), {}, {\n    bounds\n  });\n\n  const _value = sanitize(format(value), settings, value);\n  return {\n    value: _value,\n    settings\n  };\n};\n\nvar props = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  schema: schema,\n  format: format,\n  sanitize: sanitize,\n  normalize: normalize\n});\n\nconst _excluded$6 = [\"value\", \"bounds\", \"onDrag\"],\n  _excluded2$1 = [\"bounds\"];\nconst Container = styled('div', {\n  display: 'grid',\n  columnGap: '$colGap',\n  gridTemplateColumns: 'auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)'\n});\nfunction IntervalSlider(_ref) {\n  let {\n      value,\n      bounds: [min, max],\n      onDrag\n    } = _ref,\n    settings = _objectWithoutProperties(_ref, _excluded$6);\n  const ref = useRef(null);\n  const minScrubberRef = useRef(null);\n  const maxScrubberRef = useRef(null);\n  const rangeWidth = useRef(0);\n  const scrubberWidth = useTh('sizes', 'scrubberWidth');\n  const bind = useDrag(({\n    event,\n    first,\n    xy: [x],\n    movement: [mx],\n    memo: _memo = {}\n  }) => {\n    if (first) {\n      const {\n        width,\n        left\n      } = ref.current.getBoundingClientRect();\n      rangeWidth.current = width - parseFloat(scrubberWidth);\n      const targetIsScrub = (event === null || event === void 0 ? void 0 : event.target) === minScrubberRef.current || (event === null || event === void 0 ? void 0 : event.target) === maxScrubberRef.current;\n      _memo.pos = invertedRange((x - left) / width, min, max);\n      const delta = Math.abs(_memo.pos - value.min) - Math.abs(_memo.pos - value.max);\n      _memo.key = delta < 0 || delta === 0 && _memo.pos <= value.min ? 'min' : 'max';\n      if (targetIsScrub) _memo.pos = value[_memo.key];\n    }\n    const newValue = _memo.pos + invertedRange(mx / rangeWidth.current, 0, max - min);\n    onDrag({\n      [_memo.key]: sanitizeStep(newValue, settings[_memo.key])\n    });\n    return _memo;\n  });\n  const minStyle = `calc(${range(value.min, min, max)} * (100% - ${scrubberWidth} - 8px) + 4px)`;\n  const maxStyle = `calc(${1 - range(value.max, min, max)} * (100% - ${scrubberWidth} - 8px) + 4px)`;\n  return React.createElement(RangeWrapper, _extends({\n    ref: ref\n  }, bind()), React.createElement(Range, null, React.createElement(Indicator, {\n    style: {\n      left: minStyle,\n      right: maxStyle\n    }\n  })), React.createElement(Scrubber, {\n    position: \"left\",\n    ref: minScrubberRef,\n    style: {\n      left: minStyle\n    }\n  }), React.createElement(Scrubber, {\n    position: \"right\",\n    ref: maxScrubberRef,\n    style: {\n      right: maxStyle\n    }\n  }));\n}\nfunction IntervalComponent() {\n  const {\n    label,\n    displayValue,\n    onUpdate,\n    settings\n  } = useInputContext();\n  const _settings = _objectWithoutProperties(settings, _excluded2$1);\n  return React.createElement(React.Fragment, null, React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, null, label), React.createElement(Container, null, React.createElement(IntervalSlider, _extends({\n    value: displayValue\n  }, settings, {\n    onDrag: onUpdate\n  })), React.createElement(Vector, {\n    value: displayValue,\n    settings: _settings,\n    onUpdate: onUpdate,\n    innerLabelTrim: 0\n  }))));\n}\n\nvar interval = createInternalPlugin(_objectSpread2({\n  component: IntervalComponent\n}, props));\n\nconst createEventEmitter = () => {\n  const listenerMapping = new Map();\n  return {\n    on: (topic, listener) => {\n      let listeners = listenerMapping.get(topic);\n      if (listeners === undefined) {\n        listeners = new Set();\n        listenerMapping.set(topic, listeners);\n      }\n      listeners.add(listener);\n    },\n    off: (topic, listener) => {\n      const listeners = listenerMapping.get(topic);\n      if (listeners === undefined) {\n        return;\n      }\n      listeners.delete(listener);\n      if (listeners.size === 0) {\n        listenerMapping.delete(topic);\n      }\n    },\n    emit: (topic, ...args) => {\n      const listeners = listenerMapping.get(topic);\n      if (listeners === undefined) {\n        return;\n      }\n      for (const listener of listeners) {\n        listener(...args);\n      }\n    }\n  };\n};\n\nconst _excluded$5 = [\"type\", \"value\"],\n  _excluded2 = [\"onChange\", \"transient\", \"onEditStart\", \"onEditEnd\"];\nconst Store = function Store() {\n  const store = create(subscribeWithSelector(() => ({\n    data: {}\n  })));\n  const eventEmitter = createEventEmitter();\n  this.storeId = getUid();\n  this.useStore = store;\n  const folders = {};\n\n  const orderedPaths = new Set();\n\n  this.getVisiblePaths = () => {\n    const data = this.getData();\n    const paths = Object.keys(data);\n    const hiddenFolders = [];\n    Object.entries(folders).forEach(([path, settings]) => {\n      if (\n      settings.render &&\n      paths.some(p => p.indexOf(path) === 0) &&\n      !settings.render(this.get))\n        hiddenFolders.push(path + '.');\n    });\n    const visiblePaths = [];\n    orderedPaths.forEach(path => {\n      if (path in data &&\n      data[path].__refCount > 0 &&\n      hiddenFolders.every(p => path.indexOf(p) === -1) && (\n      !data[path].render || data[path].render(this.get))) {\n        visiblePaths.push(path);\n      }\n    });\n    return visiblePaths;\n  };\n\n  this.setOrderedPaths = newPaths => {\n    newPaths.forEach(p => orderedPaths.add(p));\n  };\n  this.orderPaths = paths => {\n    this.setOrderedPaths(paths);\n    return paths;\n  };\n\n  this.disposePaths = paths => {\n    store.setState(s => {\n      const data = s.data;\n      paths.forEach(path => {\n        if (path in data) {\n          const input = data[path];\n          input.__refCount--;\n          if (input.__refCount === 0 && input.type in SpecialInputs) {\n            delete data[path];\n          }\n        }\n      });\n      return {\n        data\n      };\n    });\n  };\n  this.dispose = () => {\n    store.setState(() => {\n      return {\n        data: {}\n      };\n    });\n  };\n  this.getFolderSettings = path => {\n    return folders[path] || {};\n  };\n\n  this.getData = () => {\n    return store.getState().data;\n  };\n\n  this.addData = (newData, override) => {\n    store.setState(s => {\n      const data = s.data;\n      Object.entries(newData).forEach(([path, newInputData]) => {\n        let input = data[path];\n\n        if (!!input) {\n          const {\n              type,\n              value\n            } = newInputData,\n            rest = _objectWithoutProperties(newInputData, _excluded$5);\n          if (type !== input.type) {\n            warn(LevaErrors.INPUT_TYPE_OVERRIDE, type);\n          } else {\n            if (input.__refCount === 0 || override) {\n              Object.assign(input, rest);\n            }\n            input.__refCount++;\n          }\n        } else {\n          data[path] = _objectSpread2(_objectSpread2({}, newInputData), {}, {\n            __refCount: 1\n          });\n        }\n      });\n\n      return {\n        data\n      };\n    });\n  };\n\n  this.setValueAtPath = (path, value, fromPanel) => {\n    store.setState(s => {\n      const data = s.data;\n      updateInput(data[path], value, path, this, fromPanel);\n      return {\n        data\n      };\n    });\n  };\n  this.setSettingsAtPath = (path, settings) => {\n    store.setState(s => {\n      const data = s.data;\n      data[path].settings = _objectSpread2(_objectSpread2({}, data[path].settings), settings);\n      return {\n        data\n      };\n    });\n  };\n  this.disableInputAtPath = (path, flag) => {\n    store.setState(s => {\n      const data = s.data;\n      data[path].disabled = flag;\n      return {\n        data\n      };\n    });\n  };\n  this.set = (values, fromPanel) => {\n    store.setState(s => {\n      const data = s.data;\n      Object.entries(values).forEach(([path, value]) => {\n        try {\n          updateInput(data[path], value, undefined, undefined, fromPanel);\n        } catch (e) {\n          if (process.env.NODE_ENV === 'development') {\n            console.warn(`[This message will only show in development]: \\`set\\` for path ${path} has failed.`, e);\n          }\n        }\n      });\n      return {\n        data\n      };\n    });\n  };\n  this.getInput = path => {\n    try {\n      return this.getData()[path];\n    } catch (e) {\n      warn(LevaErrors.PATH_DOESNT_EXIST, path);\n    }\n  };\n  this.get = path => {\n    var _this$getInput;\n    return (_this$getInput = this.getInput(path)) === null || _this$getInput === void 0 ? void 0 : _this$getInput.value;\n  };\n  this.emitOnEditStart = path => {\n    eventEmitter.emit(`onEditStart:${path}`, this.get(path), path, _objectSpread2(_objectSpread2({}, this.getInput(path)), {}, {\n      get: this.get\n    }));\n  };\n  this.emitOnEditEnd = path => {\n    eventEmitter.emit(`onEditEnd:${path}`, this.get(path), path, _objectSpread2(_objectSpread2({}, this.getInput(path)), {}, {\n      get: this.get\n    }));\n  };\n  this.subscribeToEditStart = (path, listener) => {\n    const _path = `onEditStart:${path}`;\n    eventEmitter.on(_path, listener);\n    return () => eventEmitter.off(_path, listener);\n  };\n  this.subscribeToEditEnd = (path, listener) => {\n    const _path = `onEditEnd:${path}`;\n    eventEmitter.on(_path, listener);\n    return () => eventEmitter.off(_path, listener);\n  };\n\n  const _getDataFromSchema = (schema, rootPath, mappedPaths) => {\n    const data = {};\n    Object.entries(schema).forEach(([key, rawInput]) => {\n      if (key === '') return warn(LevaErrors.EMPTY_KEY);\n      let newPath = join(rootPath, key);\n\n      if (rawInput.type === SpecialInputs.FOLDER) {\n        const newData = _getDataFromSchema(rawInput.schema, newPath, mappedPaths);\n        Object.assign(data, newData);\n\n        if (!(newPath in folders)) folders[newPath] = rawInput.settings;\n      } else if (key in mappedPaths) {\n        warn(LevaErrors.DUPLICATE_KEYS, key, newPath, mappedPaths[key].path);\n      } else {\n        const normalizedInput = normalizeInput(rawInput, key, newPath, data);\n        if (normalizedInput) {\n          const {\n            type,\n            options,\n            input\n          } = normalizedInput;\n          const {\n              onChange,\n              transient,\n              onEditStart,\n              onEditEnd\n            } = options,\n            _options = _objectWithoutProperties(options, _excluded2);\n          data[newPath] = _objectSpread2(_objectSpread2(_objectSpread2({\n            type\n          }, _options), input), {}, {\n            fromPanel: true\n          });\n          mappedPaths[key] = {\n            path: newPath,\n            onChange,\n            transient,\n            onEditStart,\n            onEditEnd\n          };\n        } else {\n          warn(LevaErrors.UNKNOWN_INPUT, newPath, rawInput);\n        }\n      }\n    });\n    return data;\n  };\n  this.getDataFromSchema = schema => {\n    const mappedPaths = {};\n    const data = _getDataFromSchema(schema, '', mappedPaths);\n    return [data, mappedPaths];\n  };\n};\nconst levaStore = new Store();\nfunction useCreateStore() {\n  return useMemo(() => new Store(), []);\n}\nif (process.env.NODE_ENV === 'development' && typeof window !== 'undefined') {\n  window.__STORE = levaStore;\n}\n\nconst defaultSettings$2 = {\n  collapsed: false\n};\nfunction folder(schema, settings) {\n  return {\n    type: SpecialInputs.FOLDER,\n    schema,\n    settings: _objectSpread2(_objectSpread2({}, defaultSettings$2), settings)\n  };\n}\n\nconst defaultSettings$1 = {\n  disabled: false\n};\n\nfunction button(onClick, settings) {\n  return {\n    type: SpecialInputs.BUTTON,\n    onClick,\n    settings: _objectSpread2(_objectSpread2({}, defaultSettings$1), settings)\n  };\n}\n\nfunction buttonGroup(opts) {\n  return {\n    type: SpecialInputs.BUTTON_GROUP,\n    opts\n  };\n}\n\nconst defaultSettings = {\n  graph: false,\n  interval: 100\n};\nfunction monitor(objectOrFn, settings) {\n  return {\n    type: SpecialInputs.MONITOR,\n    objectOrFn,\n    settings: _objectSpread2(_objectSpread2({}, defaultSettings), settings)\n  };\n}\n\nconst isInput = v => '__levaInput' in v;\nconst buildTree = (paths, filter) => {\n  const tree = {};\n  const _filter = filter ? filter.toLowerCase() : null;\n  paths.forEach(path => {\n    const [valueKey, folderPath] = getKeyPath(path);\n    if (!_filter || valueKey.toLowerCase().indexOf(_filter) > -1) {\n      merge(tree, folderPath, {\n        [valueKey]: {\n          __levaInput: true,\n          path\n        }\n      });\n    }\n  });\n  return tree;\n};\n\nconst _excluded$4 = [\"type\", \"label\", \"path\", \"valueKey\", \"value\", \"settings\", \"setValue\", \"disabled\"];\nfunction ControlInput(_ref) {\n  let {\n      type,\n      label,\n      path,\n      valueKey,\n      value,\n      settings,\n      setValue,\n      disabled\n    } = _ref,\n    rest = _objectWithoutProperties(_ref, _excluded$4);\n  const {\n    displayValue,\n    onChange,\n    onUpdate\n  } = useInputSetters({\n    type,\n    value,\n    settings,\n    setValue\n  });\n  const Input = Plugins[type].component;\n  if (!Input) {\n    warn(LevaErrors.NO_COMPONENT_FOR_TYPE, type, path);\n    return null;\n  }\n  return React.createElement(InputContext.Provider, {\n    value: _objectSpread2({\n      key: valueKey,\n      path,\n      id: '' + path,\n      label,\n      displayValue,\n      value,\n      onChange,\n      onUpdate,\n      settings,\n      setValue,\n      disabled\n    }, rest)\n  }, React.createElement(StyledInputWrapper, {\n    disabled: disabled\n  }, React.createElement(Input, null)));\n}\n\nconst StyledButton = styled('button', {\n  display: 'block',\n  $reset: '',\n  fontWeight: '$button',\n  height: '$rowHeight',\n  borderStyle: 'none',\n  borderRadius: '$sm',\n  backgroundColor: '$elevation1',\n  color: '$highlight1',\n  '&:not(:disabled)': {\n    color: '$highlight3',\n    backgroundColor: '$accent2',\n    cursor: 'pointer',\n    $hover: '$accent3',\n    $active: '$accent3 $accent1',\n    $focus: ''\n  }\n});\n\nfunction Button({\n  onClick,\n  settings,\n  label\n}) {\n  const store = useStoreContext();\n  return React.createElement(Row, null, React.createElement(StyledButton, {\n    disabled: settings.disabled,\n    onClick: () => onClick(store.get)\n  }, label));\n}\n\nconst StyledButtonGroup = styled('div', {\n  $flex: '',\n  justifyContent: 'flex-end',\n  gap: '$colGap'\n});\n\nconst StyledButtonGroupButton = styled('button', {\n  $reset: '',\n  cursor: 'pointer',\n  borderRadius: '$xs',\n  '&:hover': {\n    backgroundColor: '$elevation3'\n  }\n});\n\nconst getOpts = ({\n  label: _label,\n  opts: _opts\n}) => {\n  let label = typeof _label === 'string' ? _label.trim() === '' ? null : _label : _label;\n  let opts = _opts;\n  if (typeof _opts.opts === 'object') {\n    if (opts.label !== undefined) {\n      label = _opts.label;\n    }\n    opts = _opts.opts;\n  }\n  return {\n    label,\n    opts: opts\n  };\n};\nfunction ButtonGroup(props) {\n  const {\n    label,\n    opts\n  } = getOpts(props);\n  const store = useStoreContext();\n  return React.createElement(Row, {\n    input: !!label\n  }, label && React.createElement(Label, null, label), React.createElement(StyledButtonGroup, null, Object.entries(opts).map(([label, onClick]) => React.createElement(StyledButtonGroupButton, {\n    key: label,\n    onClick: () => onClick(store.get)\n  }, label))));\n}\n\nconst Canvas = styled('canvas', {\n  height: '$monitorHeight',\n  width: '100%',\n  display: 'block',\n  borderRadius: '$sm'\n});\n\nconst POINTS = 100;\nfunction push(arr, val) {\n  arr.push(val);\n  if (arr.length > POINTS) arr.shift();\n}\nconst MonitorCanvas = forwardRef(function ({\n  initialValue\n}, ref) {\n  const accentColor = useTh('colors', 'highlight3');\n  const backgroundColor = useTh('colors', 'elevation2');\n  const fillColor = useTh('colors', 'highlight1');\n  const [gradientTop, gradientBottom] = useMemo(() => {\n    return [colord(fillColor).alpha(0.4).toRgbString(), colord(fillColor).alpha(0.1).toRgbString()];\n  }, [fillColor]);\n  const points = useRef([initialValue]);\n  const min = useRef(initialValue);\n  const max = useRef(initialValue);\n  const raf = useRef();\n  const drawPlot = useCallback((_canvas, _ctx) => {\n    if (!_canvas) return;\n    const {\n      width,\n      height\n    } = _canvas;\n\n    const path = new Path2D();\n    const interval = width / POINTS;\n    const verticalPadding = height * 0.05;\n    for (let i = 0; i < points.current.length; i++) {\n      const p = range(points.current[i], min.current, max.current);\n      const x = interval * i;\n      const y = height - p * (height - verticalPadding * 2) - verticalPadding;\n      path.lineTo(x, y);\n    }\n\n    _ctx.clearRect(0, 0, width, height);\n\n    const gradientPath = new Path2D(path);\n    gradientPath.lineTo(interval * (points.current.length + 1), height);\n    gradientPath.lineTo(0, height);\n    gradientPath.lineTo(0, 0);\n    const gradient = _ctx.createLinearGradient(0, 0, 0, height);\n    gradient.addColorStop(0.0, gradientTop);\n    gradient.addColorStop(1.0, gradientBottom);\n    _ctx.fillStyle = gradient;\n    _ctx.fill(gradientPath);\n\n    _ctx.strokeStyle = backgroundColor;\n    _ctx.lineJoin = 'round';\n    _ctx.lineWidth = 14;\n    _ctx.stroke(path);\n\n    _ctx.strokeStyle = accentColor;\n    _ctx.lineWidth = 2;\n    _ctx.stroke(path);\n  }, [accentColor, backgroundColor, gradientTop, gradientBottom]);\n  const [canvas, ctx] = useCanvas2d(drawPlot);\n  useImperativeHandle(ref, () => ({\n    frame: val => {\n      if (min.current === undefined || val < min.current) min.current = val;\n      if (max.current === undefined || val > max.current) max.current = val;\n      push(points.current, val);\n      raf.current = requestAnimationFrame(() => drawPlot(canvas.current, ctx.current));\n    }\n  }), [canvas, ctx, drawPlot]);\n  useEffect(() => () => cancelAnimationFrame(raf.current), []);\n  return React.createElement(Canvas, {\n    ref: canvas\n  });\n});\nconst parse = val => Number.isFinite(val) ? val.toPrecision(2) : val.toString();\nconst MonitorLog = forwardRef(function ({\n  initialValue\n}, ref) {\n  const [val, set] = useState(parse(initialValue));\n  useImperativeHandle(ref, () => ({\n    frame: v => set(parse(v))\n  }), []);\n  return React.createElement(\"div\", null, val);\n});\nfunction getValue(o) {\n  return typeof o === 'function' ? o() : o.current;\n}\nfunction Monitor({\n  label,\n  objectOrFn,\n  settings\n}) {\n  const ref = useRef();\n  const initialValue = useRef(getValue(objectOrFn));\n  useEffect(() => {\n    const timeout = window.setInterval(() => {\n      var _ref$current;\n      if (document.hidden) return;\n      (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.frame(getValue(objectOrFn));\n    }, settings.interval);\n    return () => window.clearInterval(timeout);\n  }, [objectOrFn, settings.interval]);\n  return React.createElement(Row, {\n    input: true\n  }, React.createElement(Label, {\n    align: \"top\"\n  }, label), settings.graph ? React.createElement(MonitorCanvas, {\n    ref: ref,\n    initialValue: initialValue.current\n  }) : React.createElement(MonitorLog, {\n    ref: ref,\n    initialValue: initialValue.current\n  }));\n}\n\nconst _excluded$3 = [\"type\", \"label\", \"key\"];\nconst specialComponents = {\n  [SpecialInputs.BUTTON]: Button,\n  [SpecialInputs.BUTTON_GROUP]: ButtonGroup,\n  [SpecialInputs.MONITOR]: Monitor\n};\nconst Control = React.memo(({\n  path\n}) => {\n  const [input, {\n    set,\n    setSettings,\n    disable,\n    storeId,\n    emitOnEditStart,\n    emitOnEditEnd\n  }] = useInput(path);\n  if (!input) return null;\n  const {\n      type,\n      label,\n      key\n    } = input,\n    inputProps = _objectWithoutProperties(input, _excluded$3);\n  if (type in SpecialInputs) {\n    const SpecialInputForType = specialComponents[type];\n    return React.createElement(SpecialInputForType, _extends({\n      label: label,\n      path: path\n    }, inputProps));\n  }\n  if (!(type in Plugins)) {\n    log(LevaErrors.UNSUPPORTED_INPUT, type, path);\n    return null;\n  }\n  return React.createElement(ControlInput, _extends({\n    key: storeId + path,\n    type: type,\n    label: label,\n    storeId: storeId,\n    path: path,\n    valueKey: key,\n    setValue: set,\n    setSettings: setSettings,\n    disable: disable,\n    emitOnEditStart: emitOnEditStart,\n    emitOnEditEnd: emitOnEditEnd\n  }, inputProps));\n});\n\nfunction FolderTitle({\n  toggle,\n  toggled,\n  name\n}) {\n  return React.createElement(StyledTitle, {\n    onClick: () => toggle()\n  }, React.createElement(Chevron, {\n    toggled: toggled\n  }), React.createElement(\"div\", null, name));\n}\n\nconst Folder = ({\n  name,\n  path,\n  tree\n}) => {\n  const store = useStoreContext();\n  const newPath = join(path, name);\n  const {\n    collapsed,\n    color\n  } = store.getFolderSettings(newPath);\n  const [toggled, setToggle] = useState(!collapsed);\n  const folderRef = useRef(null);\n  const widgetColor = useTh('colors', 'folderWidgetColor');\n  const textColor = useTh('colors', 'folderTextColor');\n  useLayoutEffect(() => {\n    folderRef.current.style.setProperty('--leva-colors-folderWidgetColor', color || widgetColor);\n    folderRef.current.style.setProperty('--leva-colors-folderTextColor', color || textColor);\n  }, [color, widgetColor, textColor]);\n  return React.createElement(StyledFolder, {\n    ref: folderRef\n  }, React.createElement(FolderTitle, {\n    name: name,\n    toggled: toggled,\n    toggle: () => setToggle(t => !t)\n  }), React.createElement(TreeWrapper, {\n    parent: newPath,\n    tree: tree,\n    toggled: toggled\n  }));\n};\nconst TreeWrapper = React.memo(({\n  isRoot: _isRoot = false,\n  fill: _fill = false,\n  flat: _flat = false,\n  parent,\n  tree,\n  toggled\n}) => {\n  const {\n    wrapperRef,\n    contentRef\n  } = useToggle(toggled);\n  const store = useStoreContext();\n  const getOrder = ([key, o]) => {\n    var _store$getInput;\n    const order = isInput(o) ? (_store$getInput = store.getInput(o.path)) === null || _store$getInput === void 0 ? void 0 : _store$getInput.order : store.getFolderSettings(join(parent, key)).order;\n    return order || 0;\n  };\n  const entries = Object.entries(tree).sort((a, b) => getOrder(a) - getOrder(b));\n  return React.createElement(StyledWrapper, {\n    ref: wrapperRef,\n    isRoot: _isRoot,\n    fill: _fill,\n    flat: _flat\n  }, React.createElement(StyledContent, {\n    ref: contentRef,\n    isRoot: _isRoot,\n    toggled: toggled\n  }, entries.map(([key, value]) => isInput(value) ? React.createElement(Control, {\n    key: value.path,\n    valueKey: value.valueKey,\n    path: value.path\n  }) : React.createElement(Folder, {\n    key: key,\n    name: key,\n    path: parent,\n    tree: value\n  }))));\n});\n\nconst StyledRoot = styled('div', {\n  position: 'relative',\n  fontFamily: '$mono',\n  fontSize: '$root',\n  color: '$rootText',\n  backgroundColor: '$elevation1',\n  variants: {\n    fill: {\n      false: {\n        position: 'fixed',\n        top: '10px',\n        right: '10px',\n        zIndex: 1000,\n        width: '$rootWidth'\n      },\n      true: {\n        position: 'relative',\n        width: '100%'\n      }\n    },\n    flat: {\n      false: {\n        borderRadius: '$lg',\n        boxShadow: '$level1'\n      }\n    },\n    oneLineLabels: {\n      true: {\n        [`${StyledInputRow}`]: {\n          gridTemplateColumns: 'auto',\n          gridAutoColumns: 'minmax(max-content, 1fr)',\n          gridAutoRows: 'minmax($sizes$rowHeight), auto)',\n          rowGap: 0,\n          columnGap: 0,\n          marginTop: '$rowGap'\n        }\n      }\n    },\n    hideTitleBar: {\n      true: {\n        $$titleBarHeight: '0px'\n      },\n      false: {\n        $$titleBarHeight: '$sizes$titleBarHeight'\n      }\n    }\n  },\n  '&,*,*:after,*:before': {\n    boxSizing: 'border-box'\n  },\n  '*::selection': {\n    backgroundColor: '$accent2'\n  }\n});\n\nconst iconWidth = 40;\nconst Icon = styled('i', {\n  $flexCenter: '',\n  width: iconWidth,\n  userSelect: 'none',\n  cursor: 'pointer',\n  '> svg': {\n    fill: '$highlight1',\n    transition: 'transform 350ms ease, fill 250ms ease'\n  },\n  '&:hover > svg': {\n    fill: '$highlight3'\n  },\n  variants: {\n    active: {\n      true: {\n        '> svg': {\n          fill: '$highlight2'\n        }\n      }\n    }\n  }\n});\nconst StyledTitleWithFilter = styled('div', {\n  display: 'flex',\n  alignItems: 'stretch',\n  justifyContent: 'space-between',\n  height: '$titleBarHeight',\n  variants: {\n    mode: {\n      drag: {\n        cursor: 'grab'\n      }\n    }\n  }\n});\nconst FilterWrapper = styled('div', {\n  $flex: '',\n  position: 'relative',\n  width: '100%',\n  overflow: 'hidden',\n  transition: 'height 250ms ease',\n  color: '$highlight3',\n  paddingLeft: '$md',\n  [`> ${Icon}`]: {\n    height: 30\n  },\n  variants: {\n    toggled: {\n      true: {\n        height: 30\n      },\n      false: {\n        height: 0\n      }\n    }\n  }\n});\nconst StyledFilterInput = styled('input', {\n  $reset: '',\n  flex: 1,\n  position: 'relative',\n  height: 30,\n  width: '100%',\n  backgroundColor: 'transparent',\n  fontSize: '10px',\n  borderRadius: '$root',\n  '&:focus': {},\n  '&::placeholder': {\n    color: '$highlight2'\n  }\n});\nconst TitleContainer = styled('div', {\n  touchAction: 'none',\n  $flexCenter: '',\n  flex: 1,\n  '> svg': {\n    fill: '$highlight1'\n  },\n  color: '$highlight1',\n  variants: {\n    drag: {\n      true: {\n        $draggable: '',\n        '> svg': {\n          transition: 'fill 250ms ease'\n        },\n        '&:hover': {\n          color: '$highlight3'\n        },\n        '&:hover > svg': {\n          fill: '$highlight3'\n        }\n      }\n    },\n    filterEnabled: {\n      false: {\n        paddingRight: iconWidth\n      }\n    }\n  }\n});\n\nconst FilterInput = React.forwardRef(({\n  setFilter,\n  toggle\n}, ref) => {\n  const [value, set] = useState('');\n  const debouncedOnChange = useMemo(() => debounce(setFilter, 250), [setFilter]);\n  const clear = () => {\n    setFilter('');\n    set('');\n  };\n  const _onChange = e => {\n    const v = e.currentTarget.value;\n    toggle(true);\n    set(v);\n  };\n  useEffect(() => {\n    debouncedOnChange(value);\n  }, [value, debouncedOnChange]);\n  return React.createElement(React.Fragment, null, React.createElement(StyledFilterInput, {\n    ref: ref,\n    value: value,\n    placeholder: \"[Open filter with CMD+SHIFT+L]\",\n    onPointerDown: e => e.stopPropagation(),\n    onChange: _onChange\n  }), React.createElement(Icon, {\n    onClick: () => clear(),\n    style: {\n      visibility: value ? 'visible' : 'hidden'\n    }\n  }, React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"14\",\n    width: \"14\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\"\n  }, React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n    clipRule: \"evenodd\"\n  }))));\n});\nfunction TitleWithFilter({\n  setFilter,\n  onDrag,\n  onDragStart,\n  onDragEnd,\n  toggle,\n  toggled,\n  title,\n  drag,\n  filterEnabled,\n  from\n}) {\n  const [filterShown, setShowFilter] = useState(false);\n  const inputRef = useRef(null);\n  useEffect(() => {\n    var _inputRef$current, _inputRef$current2;\n    if (filterShown) (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();else (_inputRef$current2 = inputRef.current) === null || _inputRef$current2 === void 0 ? void 0 : _inputRef$current2.blur();\n  }, [filterShown]);\n  const bind = useDrag(({\n    offset: [x, y],\n    first,\n    last\n  }) => {\n    onDrag({\n      x,\n      y\n    });\n    if (first) {\n      onDragStart({\n        x,\n        y\n      });\n    }\n    if (last) {\n      onDragEnd({\n        x,\n        y\n      });\n    }\n  }, {\n    filterTaps: true,\n    from: ({\n      offset: [x, y]\n    }) => [(from === null || from === void 0 ? void 0 : from.x) || x, (from === null || from === void 0 ? void 0 : from.y) || y]\n  });\n  useEffect(() => {\n    const handleShortcut = event => {\n      if (event.key === 'L' && event.shiftKey && event.metaKey) {\n        setShowFilter(f => !f);\n      }\n    };\n    window.addEventListener('keydown', handleShortcut);\n    return () => window.removeEventListener('keydown', handleShortcut);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(StyledTitleWithFilter, {\n    mode: drag ? 'drag' : undefined\n  }, React.createElement(Icon, {\n    active: !toggled,\n    onClick: () => toggle()\n  }, React.createElement(Chevron, {\n    toggled: toggled,\n    width: 12,\n    height: 8\n  })), React.createElement(TitleContainer, _extends({}, drag ? bind() : {}, {\n    drag: drag,\n    filterEnabled: filterEnabled\n  }), title === undefined && drag ? React.createElement(\"svg\", {\n    width: \"20\",\n    height: \"10\",\n    viewBox: \"0 0 28 14\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"circle\", {\n    cx: \"2\",\n    cy: \"2\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"14\",\n    cy: \"2\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"26\",\n    cy: \"2\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"2\",\n    cy: \"12\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"14\",\n    cy: \"12\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    cx: \"26\",\n    cy: \"12\",\n    r: \"2\"\n  })) : title), filterEnabled && React.createElement(Icon, {\n    active: filterShown,\n    onClick: () => setShowFilter(f => !f)\n  }, React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"20\",\n    viewBox: \"0 0 20 20\"\n  }, React.createElement(\"path\", {\n    d: \"M9 9a2 2 0 114 0 2 2 0 01-4 0z\"\n  }), React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z\",\n    clipRule: \"evenodd\"\n  })))), React.createElement(FilterWrapper, {\n    toggled: filterShown\n  }, React.createElement(FilterInput, {\n    ref: inputRef,\n    setFilter: setFilter,\n    toggle: toggle\n  })));\n}\n\nconst _excluded$2 = [\"store\", \"hidden\", \"theme\", \"collapsed\"];\nfunction LevaRoot(_ref) {\n  let {\n      store,\n      hidden = false,\n      theme,\n      collapsed = false\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded$2);\n  const themeContext = useDeepMemo(() => mergeTheme(theme), [theme]);\n  const [toggled, setToggle] = useState(!collapsed);\n  const computedToggled = typeof collapsed === 'object' ? !collapsed.collapsed : toggled;\n  const computedSetToggle = useMemo(() => {\n    if (typeof collapsed === 'object') {\n      return value => {\n        if (typeof value === 'function') {\n          collapsed.onChange(!value(!collapsed.collapsed));\n        } else {\n          collapsed.onChange(!value);\n        }\n      };\n    }\n    return setToggle;\n  }, [collapsed]);\n  if (!store || hidden) return null;\n  return React.createElement(ThemeContext.Provider, {\n    value: themeContext\n  }, React.createElement(LevaCore, _extends({\n    store: store\n  }, props, {\n    toggled: computedToggled,\n    setToggle: computedSetToggle,\n    rootClass: themeContext.className\n  })));\n}\nconst LevaCore = React.memo(({\n  store,\n  rootClass,\n  fill: _fill = false,\n  flat: _flat = false,\n  neverHide: _neverHide = false,\n  oneLineLabels: _oneLineLabels = false,\n  titleBar: _titleBar = {\n    title: undefined,\n    drag: true,\n    filter: true,\n    position: undefined,\n    onDrag: undefined,\n    onDragStart: undefined,\n    onDragEnd: undefined\n  },\n  hideCopyButton: _hideCopyButton = false,\n  toggled,\n  setToggle\n}) => {\n  var _titleBar$drag, _titleBar$filter;\n  const paths = useVisiblePaths(store);\n  const [filter, setFilter] = useState('');\n  const tree = useMemo(() => buildTree(paths, filter), [paths, filter]);\n\n  const [rootRef, set] = useTransform();\n\n  const shouldShow = _neverHide || paths.length > 0;\n  const title = typeof _titleBar === 'object' ? _titleBar.title || undefined : undefined;\n  const drag = typeof _titleBar === 'object' ? (_titleBar$drag = _titleBar.drag) !== null && _titleBar$drag !== void 0 ? _titleBar$drag : true : true;\n  const filterEnabled = typeof _titleBar === 'object' ? (_titleBar$filter = _titleBar.filter) !== null && _titleBar$filter !== void 0 ? _titleBar$filter : true : true;\n  const position = typeof _titleBar === 'object' ? _titleBar.position || undefined : undefined;\n  const onDrag = typeof _titleBar === 'object' ? _titleBar.onDrag || undefined : undefined;\n  const onDragStart = typeof _titleBar === 'object' ? _titleBar.onDragStart || undefined : undefined;\n  const onDragEnd = typeof _titleBar === 'object' ? _titleBar.onDragEnd || undefined : undefined;\n  React.useEffect(() => {\n    set({\n      x: position === null || position === void 0 ? void 0 : position.x,\n      y: position === null || position === void 0 ? void 0 : position.y\n    });\n  }, [position, set]);\n  globalStyles();\n  return React.createElement(PanelSettingsContext.Provider, {\n    value: {\n      hideCopyButton: _hideCopyButton\n    }\n  }, React.createElement(StyledRoot, {\n    ref: rootRef,\n    className: rootClass,\n    fill: _fill,\n    flat: _flat,\n    oneLineLabels: _oneLineLabels,\n    hideTitleBar: !_titleBar,\n    style: {\n      display: shouldShow ? 'block' : 'none'\n    }\n  }, _titleBar && React.createElement(TitleWithFilter, {\n    onDrag: point => {\n      set(point);\n      onDrag === null || onDrag === void 0 ? void 0 : onDrag(point);\n    },\n    onDragStart: point => onDragStart === null || onDragStart === void 0 ? void 0 : onDragStart(point),\n    onDragEnd: point => onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd(point),\n    setFilter: setFilter,\n    toggle: flag => setToggle(t => flag !== null && flag !== void 0 ? flag : !t),\n    toggled: toggled,\n    title: title,\n    drag: drag,\n    filterEnabled: filterEnabled,\n    from: position\n  }), shouldShow && React.createElement(StoreContext.Provider, {\n    value: store\n  }, React.createElement(TreeWrapper, {\n    isRoot: true,\n    fill: _fill,\n    flat: _flat,\n    tree: tree,\n    toggled: toggled\n  }))));\n});\n\nconst _excluded$1 = [\"isRoot\"];\nlet rootInitialized = false;\nlet rootEl = null;\nfunction Leva(_ref) {\n  let {\n      isRoot = false\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded$1);\n  useEffect(() => {\n    rootInitialized = true;\n    if (!isRoot && rootEl) {\n      rootEl.remove();\n      rootEl = null;\n    }\n    return () => {\n      if (!isRoot) rootInitialized = false;\n    };\n  }, [isRoot]);\n  return React.createElement(LevaRoot, _extends({\n    store: levaStore\n  }, props));\n}\n\nfunction useRenderRoot(isGlobalPanel) {\n  useEffect(() => {\n    if (isGlobalPanel && !rootInitialized) {\n      if (!rootEl) {\n        rootEl = document.getElementById('leva__root') || Object.assign(document.createElement('div'), {\n          id: 'leva__root'\n        });\n        if (document.body) {\n          document.body.appendChild(rootEl);\n          render(React.createElement(Leva, {\n            isRoot: true\n          }), rootEl);\n        }\n      }\n      rootInitialized = true;\n    }\n  }, [isGlobalPanel]);\n}\n\nconst _excluded = [\"store\"];\nfunction LevaPanel(_ref) {\n  let {\n      store\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  const parentStore = useStoreContext();\n  const _store = store === undefined ? parentStore : store;\n  return React.createElement(LevaRoot, _extends({\n    store: _store\n  }, props));\n}\n\nfunction parseArgs(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined) {\n  let schema;\n  let folderName = undefined;\n  let folderSettings;\n  let hookSettings;\n  let deps;\n  if (typeof schemaOrFolderName === 'string') {\n    folderName = schemaOrFolderName;\n    schema = settingsOrDepsOrSchema;\n    if (Array.isArray(depsOrSettingsOrFolderSettings)) {\n      deps = depsOrSettingsOrFolderSettings;\n    } else {\n      if (depsOrSettingsOrFolderSettings) {\n        if ('store' in depsOrSettingsOrFolderSettings) {\n          hookSettings = depsOrSettingsOrFolderSettings;\n          deps = depsOrSettings;\n        } else {\n          folderSettings = depsOrSettingsOrFolderSettings;\n          if (Array.isArray(depsOrSettings)) {\n            deps = depsOrSettings;\n          } else {\n            hookSettings = depsOrSettings;\n            deps = depsOrUndefined;\n          }\n        }\n      }\n    }\n  } else {\n    schema = schemaOrFolderName;\n    if (Array.isArray(settingsOrDepsOrSchema)) {\n      deps = settingsOrDepsOrSchema;\n    } else {\n      hookSettings = settingsOrDepsOrSchema;\n      deps = depsOrSettingsOrFolderSettings;\n    }\n  }\n  return {\n    schema,\n    folderName,\n    folderSettings,\n    hookSettings,\n    deps: deps || []\n  };\n}\n\nfunction useControls(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined) {\n  const {\n    folderName,\n    schema,\n    folderSettings,\n    hookSettings,\n    deps\n  } = parseArgs(schemaOrFolderName, settingsOrDepsOrSchema, depsOrSettingsOrFolderSettings, depsOrSettings, depsOrUndefined);\n  const schemaIsFunction = typeof schema === 'function';\n\n  const depsChanged = useRef(false);\n  const firstRender = useRef(true);\n\n  const _schema = useDeepMemo(() => {\n    depsChanged.current = true;\n    const s = typeof schema === 'function' ? schema() : schema;\n    return folderName ? {\n      [folderName]: folder(s, folderSettings)\n    } : s;\n  }, deps);\n\n  const isGlobalPanel = !(hookSettings !== null && hookSettings !== void 0 && hookSettings.store);\n  useRenderRoot(isGlobalPanel);\n  const [store] = useState(() => (hookSettings === null || hookSettings === void 0 ? void 0 : hookSettings.store) || levaStore);\n\n  const [initialData, mappedPaths] = useMemo(() => store.getDataFromSchema(_schema), [store, _schema]);\n  const [allPaths, renderPaths, onChangePaths, onEditStartPaths, onEditEndPaths] = useMemo(() => {\n    const allPaths = [];\n    const renderPaths = [];\n    const onChangePaths = {};\n    const onEditStartPaths = {};\n    const onEditEndPaths = {};\n    Object.values(mappedPaths).forEach(({\n      path,\n      onChange,\n      onEditStart,\n      onEditEnd,\n      transient\n    }) => {\n      allPaths.push(path);\n      if (!!onChange) {\n        onChangePaths[path] = onChange;\n        if (!transient) {\n          renderPaths.push(path);\n        }\n      } else {\n        renderPaths.push(path);\n      }\n      if (onEditStart) {\n        onEditStartPaths[path] = onEditStart;\n      }\n      if (onEditEnd) {\n        onEditEndPaths[path] = onEditEnd;\n      }\n    });\n    return [allPaths, renderPaths, onChangePaths, onEditStartPaths, onEditEndPaths];\n  }, [mappedPaths]);\n\n  const paths = useMemo(() => store.orderPaths(allPaths), [allPaths, store]);\n\n  const values = useValuesForPath(store, renderPaths, initialData);\n  const set = useCallback(values => {\n    const _values = Object.entries(values).reduce((acc, [p, v]) => Object.assign(acc, {\n      [mappedPaths[p].path]: v\n    }), {});\n    store.set(_values, false);\n  }, [store, mappedPaths]);\n  const get = useCallback(path => store.get(mappedPaths[path].path), [store, mappedPaths]);\n  useEffect(() => {\n\n    const shouldOverrideSettings = !firstRender.current && depsChanged.current;\n    store.addData(initialData, shouldOverrideSettings);\n    firstRender.current = false;\n    depsChanged.current = false;\n    return () => store.disposePaths(paths);\n  }, [store, paths, initialData]);\n  useEffect(() => {\n    const unsubscriptions = [];\n    Object.entries(onChangePaths).forEach(([path, onChange]) => {\n      onChange(store.get(path), path, _objectSpread2({\n        initial: true,\n        get: store.get\n      }, store.getInput(path)));\n      const unsub = store.useStore.subscribe(s => {\n        const input = s.data[path];\n        const value = input.disabled ? undefined : input.value;\n        return [value, input];\n      }, ([value, input]) => onChange(value, path, _objectSpread2({\n        initial: false,\n        get: store.get\n      }, input)), {\n        equalityFn: shallow\n      });\n      unsubscriptions.push(unsub);\n    });\n    return () => unsubscriptions.forEach(unsub => unsub());\n  }, [store, onChangePaths]);\n  useEffect(() => {\n    const unsubscriptions = [];\n    Object.entries(onEditStartPaths).forEach(([path, onEditStart]) => unsubscriptions.push(store.subscribeToEditStart(path, onEditStart)));\n    Object.entries(onEditEndPaths).forEach(([path, onEditEnd]) => unsubscriptions.push(store.subscribeToEditEnd(path, onEditEnd)));\n    return () => unsubscriptions.forEach(unsub => unsub());\n  }, [onEditStartPaths, onEditEndPaths, store]);\n  if (schemaIsFunction) return [values, set, get];\n  return values;\n}\n\nregister(LevaInputs.SELECT, select);\nregister(LevaInputs.IMAGE, image);\nregister(LevaInputs.NUMBER, number$1);\nregister(LevaInputs.COLOR, color);\nregister(LevaInputs.STRING, string);\nregister(LevaInputs.BOOLEAN, boolean);\nregister(LevaInputs.INTERVAL, interval);\nregister(LevaInputs.VECTOR3D, vector3d);\nregister(LevaInputs.VECTOR2D, vector2d);\n\nexport { Leva, LevaPanel, button, buttonGroup, folder, levaStore, monitor, useControls, useCreateStore };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}